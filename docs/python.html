<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.12">
<meta name="author" content="David Souther">
<title>Software Craftsmanship: Python Workbook</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:50%;border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>Software Craftsmanship: Python Workbook</h1>
<div class="details">
<span id="author" class="author">David Souther</span><br>
<span id="email" class="email"><a href="mailto:davidsouther+software-craftsmanship@gmail.com">davidsouther+software-craftsmanship@gmail.com</a></span><br>
<span id="revdate">2020-11-29</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_introduction">Introduction</a>
<ul class="sectlevel2">
<li><a href="#_python">python</a></li>
<li><a href="#_first_program">First Program</a></li>
<li><a href="#_exercises">Exercises</a></li>
</ul>
</li>
<li><a href="#_basic_types_and_control_flow">Basic Types and Control Flow</a>
<ul class="sectlevel2">
<li><a href="#_basic_types">Basic Types</a></li>
<li><a href="#_control_flow">Control Flow</a></li>
<li><a href="#_hilo">HiLo</a></li>
</ul>
</li>
<li><a href="#_functions_arrays_and_strings">Functions, Arrays, and Strings</a>
<ul class="sectlevel2">
<li><a href="#_functions">Functions</a></li>
<li><a href="#_format_strings_in_python">Format strings in Python</a></li>
<li><a href="#_arrays_in_python">Arrays in Python</a></li>
</ul>
</li>
<li><a href="#_functions_arrays_and_strings_2">Functions, Arrays, and Strings</a>
<ul class="sectlevel2">
<li><a href="#_objects_and_properties">Objects and properties</a></li>
<li><a href="#_python_classes">Python Classes</a></li>
<li><a href="#_maze_design_with_classes">Maze Design with Classes</a></li>
</ul>
</li>
<li><a href="#_unit_testing">Unit Testing</a>
<ul class="sectlevel2">
<li><a href="#_python_unittest">Python unittest</a></li>
<li><a href="#_testing_maze">Testing Maze</a></li>
<li><a href="#_advanced_topics">Advanced Topics</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>&#169; 2020 David Souther</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Copies of this document may be made for your own use and for distribution to others, provided that you do not charge any fee for such copies and further provided that each copy contains this Copyright Notice, whether distributed in print or electronically.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_introduction">Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Welcome to the Software Craftsmanship Python examples.
These examples will lead you through a variety of programming exercises in conjunction with the main Software Craftsmanship lessons.
Programming is a skill, and like any other skill, it takes practice to become truly proficient.
The exercises in these examples range from "monkey-see-monkey-do" problems getting you used to typing exactly as a computer expects, to free-ranging ideas on programs you might be interested in writing for yourself.</p>
</div>
<div class="paragraph">
<p>You will want to complete every "MSMD" section exactly as written. Computers are not forgiving when it comes to what you type in your program, and these exercises are a safe way to begin exploring the world of computer programming. The exercises for each chapter build on the MSMD section, and are opportunities for you to apply what you&#8217;ve learned conceptually to a program. You should make an attempt to complete all the exercises. Finally, projects are larger scale ideas for programs that you would be able to write with the tools presented by that point in the main text. The more you program, the better a programmer you&#8217;ll be, but you&#8217;ll probably want to pick and choose projects that interest you.</p>
</div>
<div class="sect2">
<h3 id="_python">python</h3>
<div class="paragraph">
<p>In this book, we&#8217;ll be using Python 3.
The easiest way to begin using Python 3 is by using Github Codespaces, which creates a virtual linux computer in the cloud for you to use.
It is already configured to develop all of the programs in this book.
By using codespaces, you will be up and running immediately, with no need to install any programs yourself.
However, codespaces are not free.
The are <a href="https://docs.github.com/en/free-pro-team@latest/github/developing-online-with-codespaces/about-billing-for-codespaces">billed per hour of activity</a>, though they do deactivate after 30 minutes of inactivity.
At the time of this writing, the basic tier of Codespaces are more than sufficient for anything you will do in this book, and costs $0.085 per hour.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Codespaces is BETA, and requires sign up. Update this paragraph when it&#8217;s public.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If you are using your personal computer, python is included with many Linux distributions, but if you are using macOS (OSX) or Windows, you will need to install it.
On Windows and Mac, you will need to <a href="http://www.python.org/download/">download</a> and run <a href="https://www.python.org/ftp/python/3.7.7/python-3.7.7-amd64-webinstall.exe">the windows installer</a> or <a href="https://www.python.org/ftp/python/3.7.7/python-3.7.7-macosx10.9.pkg">the mac osx installer</a> respectively.
If it is not installed by default with your linux distribution, follow <a href="https://docs.python.org/3/using/unix.html">the python documentation</a> for getting an up to date copy.
After installing Python, instructions in this workbook are exactly the same for local development or using Codespaces.
Choose one, and stick with it.</p>
</div>
</div>
<div class="sect2">
<h3 id="_first_program">First Program</h3>
<div class="sect3">
<h4 id="_editor">Editor</h4>
<div class="paragraph">
<p>An editor is a program you&#8217;ll use to write the source code of your programs.
It&#8217;s different from a word processor in that only the characters you type go into the program file.
For instance, a word program will have information about what is a heading, where the tab stops are, and where any tables might be.
In contrast, the text editor only saves the actual letters and tab you&#8217;d type.
Any formatting or coloring you see is added after-the-fact, and is not part of the original source code.</p>
</div>
<div class="paragraph">
<p>There are numerous code editors available, ranging from free to hundreds of dollars, and from having almost no features to being able to write significant portions of your source code and manage large pieces of your program for you.
We are going to choose a free editor with many nice features, but one that still makes you handle most of the programming yourself.
Managing your project on your own will help you be a better programmer later.</p>
</div>
<div class="paragraph">
<p>If you&#8217;re using the recommended Github Codespaces, the editor is <a href="https://code.visualstudio.com">Visual Studio Code</a> (or VSCode for short).
If you are wanting to install it on your own computer, you can follow the link.
It is well supported, has a tremendously rich feature set and ecosystem of extensions, and best of all, is completely free.
When you visit the VSCode page, it should suggest an appropriate download link for your platform.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p><strong>Why can&#8217;t I just use TextEdit on a mac or Notepad on Windows?</strong> You could, but neither of those programs have any tools to help you program. Most importantly, neight has syntax highlighting. Visual Studio Code will color different parts of your code neatly, allowing you to see at a glance important pieces of your program, and often allows you to catch typing mistakes before you even run the program. It also has numerous language integrations, from running code to suggesting likely completions as you type.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>When VSCode is first opened, you will need to make a new folder.</p>
</div>
<div class="paragraph">
<p>Once you have your project folder, create a file and name it <code>hello.py</code>.
Type this into the file and save:</p>
</div>
<div class="listingblock">
<div class="title">Hello, world in python</div>
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">print("Hello, world!")
print(2 + 3, 12/5, 152 * 12.6)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Use VSCode to execute in the terminal.</p>
</div>
</div>
<div class="sect3">
<h4 id="_terminal">Terminal</h4>
<div class="paragraph">
<p>Throughout the book, we will be using an editor and a command prompt almost exclusively to write and run our programs.
A simple command prompt and text editor offer numerous advantages over other programming setups like Integrated Development Environments (IDEs) and visual programming tools.
All the reasons stem from the fact that the command prompt is much closer to the code than any of the other tools allow.
While many common operations are streamlined, knowing how to use the command line effectively is crucial to overcoming many of the common problems you will encounter in the course of your programming.</p>
</div>
<div class="sect4">
<h5 id="_vscode">VSCode</h5>
<div class="paragraph">
<p>Visual Studio Code has a built-in terminal pane that opens on-demand below your code.
It uses the default terminal for your system, so read through the appropriate section below, and remember that you will always have this available right inside VSCode.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_running_the_program">Running the program</h4>
<div class="paragraph">
<p>In Visual Studio Code, you can quickly and easily run a program in the built-in
terminal by right-clicking the file and selecting "Run Python File in Terminal".</p>
</div>
<div class="paragraph">
<p>And you should see the output</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Hello, world!
5 2.4 1915.2</pre>
</div>
</div>
<div class="paragraph">
<p>Congratulations! You&#8217;ve written your first program!</p>
</div>
<div class="paragraph">
<p>![vscode hello python](./vscode_intro_py.png)</p>
</div>
</div>
<div class="sect3">
<h4 id="_oh_no_something_went_wrong">Oh no! Something went wrong!</h4>
<div class="sect4">
<h5 id="_selecting_a_python_version">Selecting a Python Version</h5>
<div class="paragraph">
<p>When you run a python file, VSCode will open the terminal below your code, and execute the python file using the currently selected python version.
VSCode may choose to use python 2, which will cause problems with some programs we run.
To fix this, click the "Settings" gear in the bottom-left of VSCode, select "Command Pallete" at the bottom of the list, type "Python: Select Interpreter" in the command list, and choose a Python 3 version.</p>
</div>
</div>
<div class="sect4">
<h5 id="_anything_else">Anything Else</h5>
<div class="paragraph">
<p>This is a lot of new activity for many readers, and it&#8217;s ok if something went wrong.
I&#8217;ll go through the most common issues here.
Keep this page handy, because even if you don&#8217;t have any of these problems this time, they may accidentally come up again later.</p>
</div>
<div class="paragraph">
<p><strong>Early readers: Please send me a message with any problems you have, so I can include them here.</strong></p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_exercises">Exercises</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Say more things</strong> Make your program say</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>"Time for Breakfast!"</p>
</li>
<li>
<p>"Goodnight, world."</p>
</li>
<li>
<p>"Programming is fun!"</p>
</li>
</ol>
</div>
</li>
<li>
<p><strong>Say even more things!</strong> Make your program say another five things.</p>
</li>
<li>
<p><strong>Say some math.</strong> Make your program say the results of more mathematical expressions. We&#8217;ll cover arithmetic more in the next chapter.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>When you&#8217;ve done some or all of these, get started in
[chapter 1](../../01_basic_types_and_control_flow/README.md)</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_basic_types_and_control_flow">Basic Types and Control Flow</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_basic_types">Basic Types</h3>
<div class="paragraph">
<p>This exercise will give you practice typing programs that use many different&#8230;&#8203;
types!
(Get it&#8230;&#8203; typing&#8230;&#8203; types?)
In the example, there are many instances of using variables that have integers, floating point numbers (floats), characters, and strings.
There are also some basic control flow statements at the end.
If you haven&#8217;t read the second half of the chapter, type them in exactly as they&#8217;re written and think about what you expect the result of running them will be.
If you have read the second half of the chapter, well, do the same, but you&#8217;ll have a hint on what they are expected to do!</p>
</div>
<div class="paragraph">
<p>Looking back on the steps from the introduction "Hello, World!", start by opening a new python file your text editor, and write these two lines of code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">print("Hello, world")
print('Hello, again')</code></pre>
</div>
</div>
<div class="paragraph">
<p>Save the file (in a new folder for this chapter) as <code>types.py</code>.
Open a command prompt, cd to the new folder you created, and type <code>python types.py</code>.
You should see:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Hello, world
Hello, again</pre>
</div>
</div>
<div class="paragraph">
<p>If you have trouble with these steps, go back to [the first exercise](../../00_introduction/python) and follow the instructions there, but for this program.
When you have it running, add these next few lines:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">print(2, 3, 5, 7, 11)

print(0.5, 1.27, 3.141)

print('h', 'e', 'l', 'l', 'o')</code></pre>
</div>
</div>
<div class="paragraph">
<p>Type them at the end of <code>types.py</code>, save the file, and run it in your terminal again.
(Leaving the terminal open so you don&#8217;t have to navigate to the directory every time would be a good idea ;)</p>
</div>
<div class="paragraph">
<p>You should see</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Hello, world
Hello, again
2 3 5 7 11
0.5 1.27 3.141
h e l l o</pre>
</div>
</div>
<div class="paragraph">
<p>Great! Are you having fun yet?</p>
</div>
<div class="paragraph">
<p>Let&#8217;s go back and look very closely at what each of these is.
On every line you&#8217;ve typed to this point, you started with the command <code>print</code>.
This is a built in piece of Python that takes whatever comes after it and outputs that value.
The first two lines you typed, <code>print("Hello, world")</code> and <code>print('Hello, world')</code>, are very similar.
The only difference is that one uses the single quotation mark, and the other uses the double quotation mark.
Both the single and double quotation marks wrap some text that you want to declare as a String.
Recall from the main text that a string is some arbitrary list of characters.
At this point, the single and double quotes are almost interchangeable.
You would use one when you want to include the other symbol in your string itself.
That said, you should choose a primary one to stick with - I encourage double quotes for Python.</p>
</div>
<div class="paragraph">
<p>The second three lines each show off a different data type.
<code>print(2 3 5 7 11)</code> outputs several integers.
Integers in Python store whole numbers only.
The folowing line, <code>print(0.5, 1.27, 3.141)</code>, outputs floating point numbers, or numbers that can be fractional.
Doing arithmetic with integers can only make integers, which we&#8217;ll see in a later block of code.
The last line here creates several one-character strings, or just characters.
Python treats the two as the same.
Strings, Integers, and Floating Point Numbers make up the entirety of data you will ever work with in a computer.
From here, it&#8217;s all about learning new ways to combine them!</p>
</div>
<div class="paragraph">
<p>The next code block is a bit bigger.
I would recommend only doing a section at a time before running the program - the sooner you catch a mistake, the easier it will be to correct!</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">i = 2
j = 3
k = 5

print(i, j, k)

m = i * j
n = j + k

print(m, n)

x = 0.5
y = 1.27
pi = 3.141

print(x, y, pi)</code></pre>
</div>
</div>
<div class="paragraph">
<p>When it&#8217;s running, you should see</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Hello, world
Hello, again
2 3 5 7 11
0.5 1.27 3.141
h e l l o
2 3 5
6 8
0.5 1.27 3.141</pre>
</div>
</div>
<div class="paragraph">
<p>Working with numbers as they&#8217;re typed in isn&#8217;t very useful.
In this block of code, we create several variables.
Variables are words in your program that refer to a piece of data.
That piece of data we call its value.
The value a variable has can change over the course of a program.
We change the value of a variable with the <code>=</code> sign.
It&#8217;s important to remember that when we use a single equal sign in a program, it acts as a verb, "to make equal" - it makes the variable on the left have the value of whatever is on the right for the rest of the program.
When a variable is anywhere else in the program, like in these print lines, the program simply uses the value currently assigned to the variable.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Variable names</div>
<div class="paragraph">
<p>A note on naming: variables can be as long as you want, but there are a few rules.
First, they can&#8217;t have any spaces in them.
Second, they can&#8217;t start with a digit (0-9).
But they can have a digit in them, and you can also use <code>\_</code>, an underscore, to separate "words" in a long variable.
In fact, Pythonistas are encouraged to!</p>
</div>
</div>
</div>
<div class="paragraph">
<p>Moving a bit faster, for the biggest section yet:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">circumference_1 = pi * y
circumference_2 = pi * n

print(circumference_1, circumference_2)

average = (i + j + k) / 3

print(average)

a = 3
b = 8.6
c = 2.12

import math
discriminant = math.sqrt((b * b) - (4 * a * c))
denominator = 2 * a
x1 = (-b + discriminant) / denominator
x2 = (-b - discriminant) / denominator

print(x1, x2)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Remember, we&#8217;re just adding these blocks to the end of the types.py file.
When it&#8217;s correct, the output will be</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Hello, world
Hello, again
2 3 5 7 11
0.5 1.27 3.141
h e l l o
2 3 5
6 8
0.5 1.27 3.141
3.98907 25.128
3.33333333333
-0.272395015515 -2.59427165115</pre>
</div>
</div>
<div class="paragraph">
<p>Oh boy! That&#8217;s a lot of math! Ok, let&#8217;s break it down.
First, there&#8217;s not much in these few lines except arithmetic - addition, subtraction, multiplication, and division.
The first four lines calculate two diffrent circumferences, using the variables and values we typed above for <code>y</code>, <code>n</code>, and <code>pi</code>.
The <code>=</code> sign says "assign the value from the right to the variable on the left".
The value on the right, or "right hand side", is <code>pi * y</code> and <code>pi * n</code>.
<code>pi</code> was assigned <code>3.141</code> above, and <code>y</code> was assigned <code>1.27</code>, so this right hand side is <code>3.141 * 1.27</code>, which is equal to <code>3.98907</code>.
That value, <code>3.98907</code>, is assigned to <code>circumference_1</code>.
The same thing happens for <code>circumference_2</code>, but with <code>n</code>.
<code>n</code> was assigned the value <code>3 + 5</code>, or <code>8</code>, which when multiplied by <code>3.141</code> is <code>25.128</code>, the value stored in <code>circumference_2</code>.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s take a look at the average line.
We add <code>i</code>, <code>j</code>, and <code>k</code>.
From above, <code>i = 2</code>, <code>j = 3</code>, and <code>k = 5</code>.
When those are all added together, they equal <code>10</code>.
The parenthesese are there to tell Python to do the addition first, before the division.
We then divide the integer 10 by 3, and in python 3 the value of the arithmetic is ALWAYS a float! So we get the extremely accurate <code>3.33333333333</code>, which is not exactly correct but as precise as the computer can calculate.
(See the appendix on computer arithmetic if you want the gory, mathy details!)</p>
</div>
<div class="paragraph">
<p>We&#8217;ve covered addition, multiplication, and division.
Subtraction should be easy to figure out.
The next section does some math with a square root.
Specifically, the next few lines calculate the <code>x</code> values that the equation <code>3x\^2 + 8.6x + 2.12 = 0</code> is equal to <code>0</code>.
This equation describes a parabola, which is the mathematical name for the shape a projectile travels in - a thrown basketball, or a cannon ball fired from artillery.
(Some of the earliest computers were created and used by the US Navy to calculate firing angles and distances for battleships during World War II.)</p>
</div>
<div class="paragraph">
<p>There are two values of <code>x</code> that the equation equals zero, and using the <a href="http://en.wikipedia.org/wiki/Quadratic_formula">quadratic formula</a>, we can find the two values.
However, the quadratic formula requires we take a square root of a number.
There&#8217;s no key for square root, so instead Python provides a variety of utilities in the <code>math</code> package.
Similar to <code>print</code>, but we need to tell Python explicitly that we want them.
To do that, we type the line <code>import math</code>.
The quadratic formula has two intermediate calculations, which we perform with <code>discriminant = math.sqrtb * b) - (4 * a * c</code> and <code>denominator = 2 * a</code>.
Multiplication has a higher priority than subraction, so in the discriminant it will happen first, but we add parens to make it clear what the order is.</p>
</div>
<div class="paragraph">
<p>Finally, we use those two intermediate variable values to calculate the two <code>x</code> values where <code>3x\^2 + 8.6x + 2.12 = 0</code> holds true.</p>
</div>
<div class="paragraph">
<p>Whew! That&#8217;s a lot of math!
But the computer does it all, correctly, every time.
That alone should save your skin in a math class or two!</p>
</div>
<div class="paragraph">
<p>Let&#8217;s skip ahead of math for awhile, and look at those strings again.
We&#8217;re going to cover what, exactly, this notation means in the next chapter, but for now practice the typing and think about what the output means the code is doing.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">a = "Hello, world"
b = 'Hello, world'
c = "This is" + " more text"

print(a, b, c)

print(len(a), len(b), len(c))</code></pre>
</div>
</div>
<div class="paragraph">
<p>The output of the program at this point is</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Hello, world
Hello, again
2 3 5 7 11
0.5 1.27 3.141
h e l l o
2 3 5
6 8
0.5 1.27 3.141
3.99542 25.168
3 3.33333333333
-0.272395015515 -2.59427165115
Hello, world Hello, world This is more text
12 12 17</pre>
</div>
</div>
<div class="paragraph">
<p>The first two lines should make sense - a variable can have a value that is a string, as well as an integer or float.
The third line shows something new.
We can add strings together? Yes! Technically, the operation is called "concatenation", but it uses the <code>+</code> character, and simply joins the two strings into one single string, side by side.
It doesn&#8217;t add a space or anything, you have to do that on your own.
You can get the integer length, or number of characters in a string, using the <code>len(string_variable)</code> command.</p>
</div>
<div class="paragraph">
<p>One last Monkey-see-monkey-do exercise, practicing typing full statements rather
than simple expressions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">MIN_BALANCE = 25
current_balance = 30
transaction_amount = 10

if (current_balance - transaction_amount) &lt; MIN_BALANCE:
	print("This transaction is too large.")
else:
	current_balance = current_balance - transaction_amount

print("Your current balance is: $" + str(current_balance))

for i in range(0, 10):
	print(i)</code></pre>
</div>
</div>
<div class="paragraph">
<p>And the complete output from the first big program file is</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Hello, world
Hello, again
2 3 5 7 11
0.5 1.27 3.141
h e l l o
2 3 5
6 8
0.5 1.27 3.141
3.99542 25.168
3 3.33333333333
-0.272395015515 -2.59427165115
Hello, world Hello, world This is more text
12 12 17
This transaction is too large.
Your current balance is: $30
0
1
2
3
4
5
6
7
8
9</pre>
</div>
</div>
<div class="paragraph">
<p>The last two lines give a way to do the same code many times with a single value changing - in this case, printing the variable with the value 0, then 1, then 2, and so forth.</p>
</div>
<div class="paragraph">
<p>Before that, we have a possible bank application.
This bank requires that a savings account must always have at least $25.
When someone tries to do a transaction, the program first checks if the account has enough money.
If not, it prints a warning to the user.
Otherwise, it deducts the transaction amount from the account.
Either way, it always tells the user how much money is remaining in the account.
We&#8217;ll cover these more in the next section.</p>
</div>
<div class="sect3">
<h4 id="_exercises_2">Exercises</h4>
<div class="paragraph">
<p>You should do each of these exercises in their own files.
They include a lot of math.
Don&#8217;t let the math scare you! We&#8217;re just using python as a calculator at this point.
Do each computation, store it in a variable, and then print that variable out.
The goal here is to practice typing python code and running python problems.
It is <strong>not</strong> a math course! Formulas for all the exercises are included.</p>
</div>
<div class="paragraph">
<p>Do as many or as few of the exercises as is interesting to you.
This is a chance to play around with a new hobby, and you might find some of these types of calculations are interesting.
But it&#8217;s really not critical to understand all the details - just do what&#8217;s fun, and then go on to the control flow section!</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Pricing rugs</strong> A company makes rugs, and has asked you to calculate the price for their rugs.
They have square rugs (<code>area = length \* length</code>), rectangular rugs (<code>area = length * width</code>), and circular rugs (<code>area = pi \* radius \* radius</code>).
Rugs are $5 per square foot of finished rug.
Write a program that prints the cost of rugs for these sizes:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Square, 1 foot on a side. ($5)</p>
</li>
<li>
<p>Square, 2.5 feet on a side. ($31.25)</p>
</li>
<li>
<p>Rectangular, 3 feet by 5 feet. ($75)</p>
</li>
<li>
<p>Circular, 1.5 foot radius (3 feet across).  ($35.33645, using pi = 3.141)</p>
</li>
</ol>
</div>
</li>
<li>
<p><strong>Advanced rugs</strong> The rug company loves your code!
They want you to add another feature!
They now offer edges on their rugs.
Edging costs $1/foot of edge.
(The perimeter of a square is length \* 4.
A rectangle is length \* 2 \+ width \* 2.
A circle&#8217;s perimeter is Pi \* radius \* 2.) The same rugs, with edging, should be</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>$9</p>
</li>
<li>
<p>$41.25</p>
</li>
<li>
<p>$91</p>
</li>
<li>
<p>$44.77</p>
</li>
</ol>
</div>
</li>
<li>
<p><strong>Harder Math</strong>  You might recognize the math section in the middle of the program (where we use the 'discriminant' variable) as the quadratic equation.
THe quadratic equation is a formula mathemeticians use to determine where a parabola has the value zero, and that physicists use to calculate where a basketball will land when thrown with a certain force.</p>
<div class="paragraph">
<p>The full quadratic equation is, again:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>import math

discriminant = math.sqrt((b * b) - (4 * a * c))
denominator = 2 * a
x1 = (-b + discriminant) / denominator
x2 = (-b - discriminant) / denominator</pre>
</div>
</div>
<div class="paragraph">
<p>the different being a + in the first and a - in the second.</p>
</div>
<div class="paragraph">
<p>Solve the quadratic equation for:</p>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>A = -2, B = 5, C = 3. <a href="http://www.wolframalpha.com/input/?i=-2+" class="bare">http://www.wolframalpha.com/input/?i=-2+</a><strong>x%5E+2+%2B+5+</strong>x%2B+3[x1 = -0.5, x2 = 3]</p>
</li>
<li>
<p>A = 1.5, B = -6, C = 4.25. <a href="http://www.wolframalpha.com/input/?i=1.5+" class="bare">http://www.wolframalpha.com/input/?i=1.5+</a><strong>x%5E+2+-6+</strong>x%2B+4.25[x1 = 0.919877, x2 = 3.08012]</p>
</li>
<li>
<p>A = 1, B = 200, C = -0.000015. <a href="http://www.wolframalpha.com/input/?i=x+%5E+2+%2B+200+x+-+0.000015" class="bare">http://www.wolframalpha.com/input/?i=x+%5E+2+%2B+200+x+-+0.000015</a> (x1 = 7.5*10^-8, x2 = -200)</p>
</li>
</ol>
</div>
</li>
<li>
<p>Click the answer links to see the problem breakdown in Wolfram Alpha.</p>
<div class="paragraph">
<p>Notice in the last the result from Wolfram Alpha is different than the result we got in Python.
Formally, the variation of the quadratic formula we use here is "numerically unstable" - when used on certain values, the solution we chose is not capable of giving the right answer.
While this might not look like more than a peculiarity today, it is a serious issue in many branches of software engineering.</p>
</div>
<div class="paragraph">
<p>Rerun the last calculation using the <a href="http://people.csail.mit.edu/bkph/articles/Quadratics.pdf">following formula (7)</a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>basis = -b - discriminant
x1 = basis / (2 * a)
x2 = (2 * c) / basis</pre>
</div>
</div>
<div class="paragraph">
<p>Notice how it is closer to the exact values provided by Wolfram Alpha, but still slightly incorrect.</p>
</div>
<div class="paragraph">
<p>In this exercise, the details of the math aren&#8217;t particularly important.
The important piece is recognizing there are situations where the first, obvious solution to a programming problem might have subtle errors.
It&#8217;s critical to always check your assumptions and work against some external source.
For an interface, grab a friend to test it out.
For an algorithm, verify the result against some other program that performs correctly (even if that means by hand).
We will come back to this concept of using an external source to test your programs many times throughout the text.</p>
</div>
</li>
<li>
<p><strong>Your Own Maths</strong> I promise, the only reason we&#8217;re doing this much math is because we don&#8217;t know how do to anything more interesting until the next chapter! We will start branching out! For now, though, the practice of typing various maths is excellent coding practice.</p>
<div class="paragraph">
<p>In this exercise, choose one or more of these formulas and implement it, using several sets of numbers.
For more practice, do more of these!</p>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p><strong>Recipe Measurements.</strong> In a recipe book, recipes are given in servings prepared and quantity of ingredients added.
An omelette recipe takes 3 eggs and makes 2 servings.
A waffle recipe takes 2 cups of flour, and makes 6 waffles.
If we wanted to double the recipe, we could multiply the eggs and flour by 2.
This would let us make 4 omelettes and 12 waffles, but would require 8 eggs and 4 cups of flour.
Or if you were only feeding yourself, you&#8217;d halve the recipes, using 1.5 eggs and 1 cup of flour for a half-sized omelette and 3 waffles.</p>
<div class="paragraph">
<p>As an exercise, pull a recipe book off your shelf (or find a recipe online).
Use Python to calculate the amount of measurement for doubling, tripling, or halving each recipe.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p>Tip: If you have two variables, <code>desired_servings</code> and <code>recipe_servings</code>, you can change the scale of the recipe by multiplying every measurement by <code>desired_servings / recipe_servings</code>.</p>
</div>
</div>
</div>
</li>
<li>
<p><strong>Pieces of trim</strong>
When finishing a room, it&#8217;s common to install trim at the base of the wall.
Trim commonly comes in 8' segments.
Suppose you have a room that&#8217;s 12' by 18', with a 3' wide doorway.
To cover the base of all the walls, you&#8217;ll need to cover 57' of wall with trim (12 + 12 + 18 + 18 - 3).
This requires 8 pieces of trim - because you can&#8217;t buy less than a whole piece of trim! Use python to determine the number of pieces of trim you need for rooms of these sizes:</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>12' by 18', with one 3' doorway.</p>
</li>
<li>
<p>10' by 20', with two 3' doorways.</p>
</li>
</ol>
</div>
</li>
<li>
<p><a href="https://en.wikipedia.org/wiki/Division_algorithm">Simplified Division Algorithm</a>
When you divide two numbers, there are many ways to express the result.
So far, we&#8217;ve been using the floating point format, with some number of decimals after the number.
That leads to some odd answers, like with the board-foot calculation being 233.33333333333334.
In ancient Greece, Euclid showed how to determine the "remainder" of a division - in this case, remainder 1 when dividing by 3.
In Python, there is an operator called "modulus" which returns the remainder of dividing two numbers.
It&#8217;s typed as <code>%</code>, as in <code>3 % 2</code>, which would be <code>1</code>.
Try putting <code>print(5 % 3)</code> in your python program, and see that it prints 2.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Use the modulus operator to improve your board-foot calculations. Come up with new board-foot calculations that need remainders to be sensible.</p>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>[Standard Deviation](<a href="https://en.wikipedia.org/wiki/Standard_deviation=Basic_examples" class="bare">https://en.wikipedia.org/wiki/Standard_deviation=Basic_examples</a>)</p>
<div class="ulist">
<ul>
<li>
<p>Calculate the standard deviation for the sample data - <code>2, 4, 4, 4, 5, 7, 9 = 5</code></p>
</li>
<li>
<p>Given the height of an adult male in inches, calculate which deviation he is in (mean = 70, deviation = 3).
Try using the modulus operator.</p>
<div class="ulist">
<ul>
<li>
<p><code>71 = 1/3</code></p>
</li>
<li>
<p><code>68 = - 2/3</code></p>
</li>
<li>
<p><code>78 = 2 2/3</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><strong><a href="https://en.wikipedia.org/wiki/Range_of_a_projectile">Projectile Distance</a></strong>
One of the first applied uses of computing machines was in naval <a href="https://en.wikipedia.org/wiki/Ship_gun_fire-control_system=Analogue_computed_fire_control">artillery situations</a>.
Write some code to calculate the range of a projectile fired at various velocities and angles (in <a href="https://en.wikipedia.org/wiki/Radian">radians</a>) from ground level.
To calculate sine, use <code>math.sin(x)</code>.
Assume velocity is in meters per second, so <code>g = 9.81</code> in the simplified formula on the wikipedia page.</p>
<div class="ulist">
<ul>
<li>
<p><code>v = 100, theta = 0.1745; D = 348.581308308</code> (theta is \~10 degrees)</p>
</li>
<li>
<p><code>v = 1000, theta = 0.1745; D = 34858.1308308</code></p>
</li>
<li>
<p><code>v = 250, theta = 0.6981; D = 6274.18922949</code> (theta is \~40 degrees)</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Congratulations! You have a lot of experience typing Python programs! Getting used to typing and running programs is a skill in itself, independant of the actual programming you will do.
This typeing programs is usually called coding, seperate from actually figuring out what a program should do, which is the programming.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_control_flow">Control Flow</h3>
<div class="paragraph">
<p>These exercises put the control flow concepts to use.
They use the techniques from part 1, types, extensively.
Many control flow constructs derive their operation from the types and operations within them, so having condidence from the first half of the chapter is critical to success, really in the rest of your programming career.</p>
</div>
<div class="paragraph">
<p>As in the first two groups of examples, start by opening a new file in your editor.
Type in these two lines.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">for i in range(0, 10):
    print(i)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Save the new file, as <code>control.py</code></p>
</div>
<div class="paragraph">
<p>Run the file - <code>python3 control.py</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre>0
1
2
3
4
5
6
7
8
9</pre>
</div>
</div>
<div class="paragraph">
<p>What happens here? This is a "for" loop, which runs the statement <code>print(i)</code> 10 times, each time with the variable <code>i</code> taking a different value.
<code>print(i)</code> itself is an expression, that becomes a statement when the start of the new line tells python to end the expression.
The <code>for i &#8230;&#8203;
:</code> tells python what variable to change within the block.
The <code>range(0, 10)</code> tells python to use that range for the values of <code>i</code>, starting at 0 and going up to, but not inclding, 10.
The block is everything after that line, <em>that is at the next indentation level</em>.
An indentation level is anything with the same number of spaces at the start of the line.
<code>for i in range(0, 10):</code> has no spaces.
`    print(i)` has four spaces.
Indentatation level is very important in Python, and we will revist it several times.</p>
</div>
<div class="sect3">
<h4 id="_summations">Summations</h4>
<div class="paragraph">
<p>With that in mind, rewrite the file so it contains this.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">sum = 0
for i in range(1, 11):
	print(i)
	sum = sum + i
print(sum)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Save it, run it, and the results:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>1
2
3
4
5
6
7
8
9
10
55</pre>
</div>
</div>
<div class="paragraph">
<p>Take a moment, and think about what happened.</p>
</div>
<div class="paragraph">
<p>The program started with an additional declaration, setting <code>sum</code> to 0.
There is an additional line in the for statement, <code>sum = sum + i</code>.
It is at the same indentation level as <code>print(i)</code>, and so runs in the same segment of the program.
Finally, <code>print(sum)</code> is back at no indentation, so runs after the for statement finishes.</p>
</div>
<div class="paragraph">
<p>Change this program again:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">sum = 0
N = input("Summing 1 to N: ")
for i in range(1, (int(N) + 1)):
    sum = sum + i
print(sum)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now when it runs, it will stop and ask you to input a number for N.
Choosing 10 will print 55.
What does choosing 100 print?</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Summing 1 to N: 100
5050</pre>
</div>
</div>
<div class="paragraph">
<p>The <code>input("Summing 1 to N: ")</code> is a python way to ask the user to enter a number.
Whatever the user types, up to the enter, is the result of the expression.
Because what the user types is a string, you need to tell python to treat it as an integer with <code>int(N)</code>.</p>
</div>
<div class="paragraph">
<p>Now that we have a program that sums a few numbers, change it to ask the user to choose between summing or making a product.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">add = input("Sum or Product? (S/P): ")
if add == "S" or add == "s":
	sum = 0
	N = input("Summing 1 to N: ")
	for i in range(1, (int(N) + 1)):
		sum = sum + i
	print(sum)
elif add == "P" or add == "p":
	prod = 1
	N = input("Product 1 to N: ")
	for i in range(1, (int(N) + 1)):
		prod = prod * i
	print(prod)
else:
	print("Unsupported Operation")</code></pre>
</div>
</div>
<div class="paragraph">
<p>As we go along, the programs get bigger! The sum program is still there, lines 3 through 7.
They&#8217;re repeated again, lines 9 through 13.
The two parts of the program are separated by an if clause, with three branches.
The first <code>if</code> is the same as from the text.
The second, the <code>elif</code>, is a way to do a second check in the program.
The <code>else</code> handles any time the input isn&#8217;t <code>s</code>, <code>S</code>, <code>p</code>, <code>P</code>.
Notice in the <code>if</code> conditions, the <code>or</code> checks for the two different possible characters.
Remember that upper case and lower case characters are different, so checking for both is the polite thing for users.</p>
</div>
<div class="paragraph">
<p>There is one very important thing to note about the <code>if</code> statements - the use of <code>==</code> or double equals.
To this point, we&#8217;ve been using <code>=</code> to be assignment, making a variable have some value.
This <code>==</code> is a different operation entirely, and is actually comparing two values.
Be careful not to confuse them!</p>
</div>
<div class="paragraph">
<p>Use this program to compute the sum of 1 to 57, and the product of 1 to 100.
Python internally handles integers to arbitrary length, making it ideal for many numerical programs.
When the number is smaller than some internal integer size (at minimum 32 bits, possibly 64 bits on modern computers), Python will use that for speed.
When a calculation needs more precision, it moves to a "long integer" format that allows integers of any size.
That said, it is still constrained by things like its memory and processing power - you can&#8217;t reasonably iterate over more than about 2\^16.</p>
</div>
</div>
<div class="sect3">
<h4 id="_roman_numerals">Roman Numerals</h4>
<div class="paragraph">
<p>We&#8217;re going to write a completely new program, so start a new file.
Name it <code>roman.py</code>, in the same folder as <code>control.py</code>.
We are going to build this new program up bit by bit, discussing each piece we add.</p>
</div>
<div class="paragraph">
<p>Start with these lines:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">print("Decimal to Roman Numeral")
print()
number = int(input("Decimal integer: "))
print()
print("Converting " + str(number) + " to Roman.")</code></pre>
</div>
</div>
<div class="paragraph">
<p>This form will become fairly common - print some header content, ask the user for input, tell the user about the input.
There is the slight technicality of going between string and number - the <code>int()</code> and <code>str()</code> parts of line 3 and 5.
They will make more sense next chapter, but for now remember that the number <code>15</code> and the word with the letters "15" are different in Python&#8217;s mind.</p>
</div>
<div class="paragraph">
<p>Running it does what you&#8217;d expect:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Decimal to Roman Numeral

Decimal integer: 18

Converting 18 to Roman.</pre>
</div>
</div>
<div class="paragraph">
<p>With the basics out of the way, let&#8217;s start work on Roman numerals.
The rules for Roman Numerals involve making groups of five, starting with "I" characters.
A group of five "I"s is replaced with a "V".
Two "V"s become an "X".
Characters are added from left to right.
With this simplified Roman Numeral ruleset, add this to the program:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">numeral = ""
while number &gt; 0:
	if number &gt;= 10:
		numeral = numeral + "X"
		number = number - 10
	elif number &gt;= 5:
		numeral = numeral + "V"
		number = number - 5
	else:
		numeral = numeral + "I"
		number = number - 1

print(numeral)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Running the program, again converting 18 should print out:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Decimal to Roman Numeral

Decimal integer: 18

Converting 18 to Roman.
XVIII</pre>
</div>
</div>
<div class="paragraph">
<p>Huzzah!</p>
</div>
<div class="paragraph">
<p>Let&#8217;s take a closer look at what all we just did.
We start with <code>numeral = ""</code>, which declares and initializes the variable numeral to the empty string.
We&#8217;ll use this variable to build up the roman numeral we finally print out.
After that, we start our loop with <code>while number &gt; 0:</code>.
This implies that we&#8217;re going to be changing the <code>number</code> variable, and ending when it becomes equal to or less than zero.
So we&#8217;ll probably be subtracting from it!</p>
</div>
<div class="paragraph">
<p>The body of the loop is what gets repeated.
It&#8217;s what comes after the <code>:</code> colon and is at the next indentation level.
That&#8217;s a fancy way of saying that the lines which come afer the <code>while</code> statement with the same number of spaces ahead of them! This approach, where leading whitespace is critical to the syntax and semantics of the program, is unique to Python.
We&#8217;ll revisit it several times throughout the book, but for now suffice to say "Be consistent".
If you use VSCode, its default is four spaces, and if you hit tab, it will replace that with the requisite four spaces.</p>
</div>
<div class="paragraph">
<p>Within the <code>while</code> loop we have an <code>if &#8230;&#8203; elif &#8230;&#8203; else</code> control structure.
Each <code>if</code> branch has a condition.
In this case, the conditions are <code>number &gt;= 10</code> and <code>number &gt;= 5</code>.
Python will evaluate them in order, execute the first block whose condition is true, and then skip to after the end of all the <code>if &#8230;&#8203; elif &#8230;&#8203; else</code> blocks.
This sequential ordering is important - it will always peform the first matching case, not the best matching case.
If none of the conditions match, it will do the <code>else</code> body.</p>
</div>
<div class="paragraph">
<p>Each body then has a pretty similar setup, like for the 10 case:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>numeral = numeral + "X"
numer = number - 10</pre>
</div>
</div>
<div class="paragraph">
<p>This appends (adds it to the end) the next letter of the numeral, and then changes the number we&#8217;re currently building up.
This behavior, where we change some variable of interest and then the variable which controls the loop, is a very common pattern.</p>
</div>
<div class="paragraph">
<p>Once the associated block of the <code>if &#8230;&#8203; elif &#8230;&#8203; else</code> finishes, the entire section is complete.
Because nothing comes after it in the code at the same indentation level, the program loops back up to the <code>while number &gt; 0:</code> line.
It evaluates that again, and if it&#8217;s still true, does the entire body over again! If instead it&#8217;s false, it goes down to the next line of code (or the end of the file) at the same indent level.
In this case, that is <code>print(numeral)</code> showing us the value we build up! And being the last line in the file, the progam ends.</p>
</div>
<div class="sect4">
<h5 id="_wider_range_of_numerals">Wider Range of Numerals</h5>
<div class="paragraph">
<p>Of course, our program doesn&#8217;t handle numbers larger than 49, and it doesn&#8217;t follow the rule that 4 should be "IV", instead of "IIII". Let&#8217;s fix the second one together. Edit the body of the algorithm (the while loop) to have a new case for when number is 4:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">	elif (number == 4):
		numeral = numeral + "IV"
		number = 0</code></pre>
</div>
</div>
<div class="paragraph">
<p>and run it, using 14:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Decimal to Roman Numeral

Decimal integer: 14

Converting 14 to Roman.
XIV</pre>
</div>
</div>
<div class="paragraph">
<p>It&#8217;s also a good idea, whenever changing a program, to run it using the old
values, to make sure it&#8217;s still correct.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_exercises_3">Exercises</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Roman Numerals</strong> Finish the Roman Numeral program.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>The full order of Roman numerals was:</p>
<div class="ulist">
<ul>
<li>
<p>I - One</p>
</li>
<li>
<p>V - Five</p>
</li>
<li>
<p>X - Ten</p>
</li>
<li>
<p>L - Fifty</p>
</li>
<li>
<p>C - Hundred</p>
</li>
<li>
<p>D - Five hundred</p>
</li>
<li>
<p>M - One Thousand</p>
</li>
</ul>
</div>
</li>
<li>
<p>The used subractions were</p>
<div class="ulist">
<ul>
<li>
<p>IV - Four</p>
</li>
<li>
<p>IX - Nine</p>
</li>
<li>
<p>XL - Forty</p>
</li>
<li>
<p>XC - Ninety</p>
</li>
<li>
<p>CD - Four Hundred</p>
</li>
<li>
<p>CM - Nine Hundred</p>
</li>
</ul>
</div>
</li>
<li>
<p>Sample numbers</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>551 - DLI</p>
</li>
<li>
<p>707 - DCCVII</p>
</li>
<li>
<p>90 - DCCCXC</p>
</li>
<li>
<p>1800 - MDCCC</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
<li>
<p><strong>Recipes</strong></p>
<div class="ulist">
<ul>
<li>
<p>Create a new program <code>measurements.py</code>.
Ask the user how many people they want to serve.
Just choose a recipe and hard-code the measurements for the recipe.
Scale the ingredients based on how many people the user has entered.
After the first recipe, add a few more and let the user choose between several recipes.
Make sure your recipes don&#8217;t all use the same ingredients!</p>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>This will feel like a huge amount of duplication.
That is the point.
We do not have the tools we need to make this work without duplicating this code.
The exercises in this chapter are to get you feeling confident using only the tools we have so far - variables, values, math, and <code>if</code> conditions.
In chapter 2, we will use <strong>functions</strong> to shock you with how much shorter it can be!</p>
</div>
</blockquote>
</div>
</li>
<li>
<p>Some of the recipes you scaled down in the last section might not make a huge amount of sense.
Trying to get one and a half eggs?
That&#8217;s a pain!
Add conditional statements to your calculations in the earlier exercises that tell the user they can&#8217;t scale certain recipes if that would result in measurements that are difficult to scale (like fractional eggs).</p>
</li>
<li>
<p>While scaling some of these measurements, you may have noticed some
odd or difficult measurements. How do you handle 0.125 cups of an
ingredient? In a real kitchen, you would switch from 1/8th a cup to
using 2 tablespoons! Modify your program to convert between certain unit
sizes. You can find tables of measurements conversions online, but most
conversions will work by using the conversions of 1 cup is 16
tabelespoons, and 1 tablespoon is 3 teaspoons.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Rugs</strong></p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Create a new program, <code>square_rug.py</code>.
When it runs, ask the user the size of the rug, and whether they want fringe.
Print out the cost.</p>
</li>
<li>
<p>Create two more rugs programs, <code>rectangular_rug.py</code> and <code>circular_rug.py</code>.
Ask the user the appropriate questions and print the cost.</p>
</li>
<li>
<p>Create a program that combines these three - first ask the user which type of rug they are creating, and then have it choose between those three implementations.
Copy/paste the implementations from the earlier parts of the exercise.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>These control statements - <code>while</code>, <code>for</code>, and <code>if</code>, are the bread and butter of making programs do interesting things.
Many times, we want to do the same calculations on slightly different numbers - <code>for</code> and <code>while</code>.
Other times, we need to do different things based on some condition.
In programming, these are called iteration and banching, respectively.</p>
</div>
<div class="paragraph">
<p>Before we move on to writing our first big program, we&#8217;re going to step back to the theory and look at [tracing program execution](./TRACING.md).</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_hilo">HiLo</h3>
<div class="paragraph">
<p>HiLo is a simple guessing game. The computer chooses a random number, and the
player is scored on how quickly they guess the number.</p>
</div>
<div class="sect3">
<h4 id="_type_this_program">Type this Program</h4>
<div class="paragraph">
<p>In a new file, type this program, save it as <code>hilo.py</code>, and run it in your terminal!</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">import random

print("HiLo")
print()
print("This is the game of HiLo.")
print()
print("You will have 6 tries to guess the amount of money in the")
print("HiLo jackpot, which is between 1 and 100 jellybeans. If you")
print("guess the amount, you win $10 for every guess you don't take!")
print("Then you get another chance to win more money. However,")
print("if you do not guess the amount, the game ends!")
print()

winnings = 0
playing = True

while playing:
    guesses = 0
    number = random.randint(1, 10)
    round_finished = False

    while not round_finished:
        guess = input("Your guess: ")

        if guess == "":
            playing = False
            break # Exit the round early

        guess = int(guess)

        if guess == number:
            new_winnings = winnings + ((6 - guesses) * 10)
            print("Got it! You won " + str(new_winnings) + " dollars!")
            winnings = new_winnings
            print("Your total winnings are " + str(winnings) + " dollars!")

            again = input("Play again? (Y/n) ")
            if again != "Y":
                playing = False
            round_finished = True

        else:
            if guess &gt; number:
                print("Your guess was too high!")
            else:
                print("Your guess was too low!")

            guesses = guesses + 1
            if guesses &gt;= 6:
                print("You took too many guesses!")
                playing = False
                round_finished = True

            print()

print("Goodbye!")</code></pre>
</div>
</div>
<div class="paragraph">
<p>Run this a few times, and enjoy playing this little game!</p>
</div>
<div class="paragraph">
<p>A couple things to call out that we haven&#8217;t seen before.</p>
</div>
<div class="paragraph">
<p>We have multiple loops nested, <code>while playing</code> and <code>while not roun_finished</code>. It&#8217;s totally fine to do this - when the outer loop gets to the inner loop, the inner loop will run over and over until its condition is no longer true. The program will wrap back around to the outer loop, which will either exit itself or rerun its own body, again running the innter loop. We see the same thing with the nested <code>if &#8230;&#8203; else: if&#8230;&#8203; else</code> (and also, the <code>elif</code> and <code>else</code> are totally optional!).</p>
</div>
<div class="paragraph">
<p>There is an extra way to control the loops, rather than relying only on the loop condition. That&#8217;s the <code>break</code> statement. It will immediately end the nearest loop, skipping the rest of the body and also not evaluating the condition. <code>break</code> means end the loop right now! There&#8217;s another command, <code>continue</code>, which skips the rest of the loop body but <em>does</em> re-check the condition back at the top.</p>
</div>
<div class="paragraph">
<p>To generate a random number, we use a pair of lines</p>
</div>
<div class="listingblock">
<div class="content">
<pre>import random
number = random.randint(0, 10)</pre>
</div>
</div>
<div class="paragraph">
<p>Just like we used <code>import math</code> to load a library function for <code>sqrt</code>, random
gives us access to a bunch of ways to test randomness. The <code>randint(0, 10)</code>
part picks an integer uniformly between 0 and 10.</p>
</div>
</div>
<div class="sect3">
<h4 id="_exercises_4">Exercises</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Assuming you copied the program exactly as presented, there is one bug that
should be obvious. Fix the program so it uses the correct range of random
numbers.</p>
</li>
<li>
<p><strong>Terminal Love</strong> You may remember programs in the 80s that used terminal
characters for all their screen printing. Before computers were powerful enough
to regularly display modern images, programmers would use the extra characters
in the ASCII character set to create the precursers to windows, tables, columns,
and other graphical interface elements. There were also utilities available to
draw those characters in a variety (by which I mean all of eight) different
colors. In this series of exercises, we&#8217;ll make HiLo look like those old games!</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p><strong>Bold</strong> To start off, we&#8217;ll include a library (like <code>random</code>) for changing the typography of pieces of the program. Create a new file in your directory named <code>colors.py</code> and paste the contents of [this file](./colors.py) into it. Save it next to your hilo program. Add <code>import colors</code> to your program, below <code>import random</code>.</p>
<div class="paragraph">
<p>Edit the first line of the indroduction paragraph to make HiLo bold - <code>print(colors.BOLD + "HiLo" + colors.NORMAL)</code>. Notice we have to tell the program to put the printing back to normal, or else all future priting would be in bold. Run the program and see what it does!</p>
</div>
</li>
<li>
<p><strong>Colors</strong> The colors module has a variety of styles, independent of each other. The typography can be <code>BOLD</code>. Printing can be in <code>WHITE</code>, <code>BLACK</code>, <code>RED</code>, <code>BLUE</code>, <code>GREEN</code>, <code>YELLO</code>, <code>CYAN</code>, and <code>PURPLE</code>. The background color can be set with <code>BG_WHITE</code>, <code>BG_BLACK</code>, <code>BG_RED</code>, and so on. Play around with the colors, until you like the look and feel of your HiLo game. <code>NORMAL</code> puts the terminal back to a normal weight white text on black background.</p>
</li>
<li>
<p><strong>Start Over</strong> If you&#8217;ve gotten your terminal into a jumbled mess, print <code>colors.CLS</code> to clear the screen, and <code>colors.at(1, 1)</code> to move the cursor to the top-left corner.</p>
</li>
<li>
<p><strong>Print at various points</strong> You can move the cursor (where the print happens) using <code>print(colors.at(r, c))</code> where r and c are the row and column you want to print at. Row and column start at the top-left of the terminal at <code>(1, 1)</code>, and on "standard" terminals there are 80 columns and 24 rows. Note, if you resize the terminal, that will change. When writing this kind of terminal program, it&#8217;s usually best to stick with those dimentions.</p>
</li>
</ol>
</div>
</li>
<li>
<p><strong>Pauses / Animation</strong> The original Hi Lo program, at the top of the page, doesn&#8217;t stop between showing the instructions and asking for the first guess. We could stop that with a simple way to ask the user for some input. Try putting <code>n = raw_input("Press enter key to continue&#8230;&#8203;")</code> in your program, and you&#8217;ll see that now the program waits for the user before continuing. In other places, you might not want to wait for the user, but you do want a pause. Using the time module, you can have your program wait a moment.</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">import time

print("Hello, world!")
time.sleep(1.5)
print("A second and a half later...")</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>While a pregnant pause in the interface might be interesting, this becomes very useful when putting animation in a program. Try the following HiLo intro scroll:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">import time

# An 8 frame animation
for i in range(1, 9):
    print(colors.CLS)
    print(colors.at(i, 38), colors.GREEN, "Hi")
    print(colors.at(i+1, 40), colors.RED, "Lo")
    # Half-second delay in each frame
    time.sleep(0.5)

input("Press enter to continue...")</code></pre>
</div>
</div>
</li>
<li>
<p>We&#8217;ll explore this more in later chapters, but see if you can incorporate this into your program!</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Difficulty</strong> Give your program several difficulty levels. You could use easy = 1 to 10, medium = 1 to 100, and hard = 1 to 1000. You could do a custom difficulty. You may want to improve the scoring, so you don&#8217;t get fewer points when the random number happens to be smaller.</p>
</li>
<li>
<p><strong>Binary Search</strong> You may have found the "optimal" algorithm is to begin by choosing 50, then either 25 or 75 depending on if your guess is high or low. This is a strategy called "Binary Search", because there is an either/or decision to look to one side or the other of the numbers you&#8217;re searching. Rewrite the program so that instead of asking the user for a guess, the program "plays" itself by guessing the number. See how long it takes it to guess any particular number.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>If you want to see a full HiLo program, see my [completed example][full_hilo].
It has the animation, a box for input, difficulty levels, and more! Play with
your program as much as you like, tweaking colors, moving the box, and whatnot.
Once you&#8217;re happy with your game, you&#8217;re ready to move on. But first:</p>
</div>
<div class="paragraph">
<p>Congratulations! You&#8217;ve written your first computer game!</p>
</div>
<div class="paragraph">
<p>[Wrap Up](../wrap_up.md)</p>
</div>
<div class="paragraph">
<p>[page437]: <a href="http://en.wikipedia.org/wiki/Code_page_437#Interpretation_of_code_points_1.E2.80.9331_and_127" class="bare">http://en.wikipedia.org/wiki/Code_page_437#Interpretation_of_code_points_1.E2.80.9331_and_127</a>
[full_hilo]: <a href="https://github.com/DavidSouther/software_craftsmanship/blob/master/01_basic_types_and_control_flow/hilo/hilo.py" class="bare">https://github.com/DavidSouther/software_craftsmanship/blob/master/01_basic_types_and_control_flow/hilo/hilo.py</a>
[box_chars]: <a href="http://en.wikipedia.org/wiki/Box-drawing_character" class="bare">http://en.wikipedia.org/wiki/Box-drawing_character</a></p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_functions_arrays_and_strings">Functions, Arrays, and Strings</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_functions">Functions</h3>
<div class="paragraph">
<p>Let&#8217;s start with this program, that defines a function, a reusable block of
code, to calculate the price of our square rug from chapter 1:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">def square_rug_cost(size, fringe):
    area = size ** 2
    cost = area * 5
    if (fringe):
        perimeter = size * 4
        cost = cost + perimiter * 1.5
    return cost

print(square_rug_cost(5, False))
print(square_rug_cost(2.5, True))</code></pre>
</div>
</div>
<div class="paragraph">
<p>Type this program as <code>rug_functions.py</code> and run it. You should see it print out
the two rug costs - 125 and 46.25, respectively.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s take a closer look at the anatomy of this function. Recall from the
textbook portion that a function needs four things: A name, its arguments
(also called parameters), the body, and a return statement. In this
<code>square_rug_cost</code> function, those look like this:</p>
</div>
<div class="paragraph">
<p>![diagram of a python function](./digraph_of_a_python_function.png)</p>
</div>
<div class="paragraph">
<p>In python, a function starts with the key word <code>def</code>. That&#8217;s followed by its
name, in this case <code>square_rug_cost</code>. It then has two arguments, all inside the
parentheses - <code>(size, fringe)</code>. Finally, in python, the function declaration
(the name and argument list) ends with the <code>:</code> (colon). We&#8217;ve seen this in
the chapter on control flow as well, and it indicates that we&#8217;re about to
group a bunch of code at the next indentation level.</p>
</div>
<div class="paragraph">
<p>To get an indentation level, we add a new line (press enter on our keyboard)
and indent one level. There are several ways to indent. One is to hit the tab
key on your keyboard. Another is to add some number of spaces - at least two,
but four and eight are also common. A third way is to let VSCode do it for
you! You&#8217;ve probably seen this already when working through the first
chapter, that VSCode would automatically add the indendation for you when you
started a new line after a <code>:</code> colon.</p>
</div>
<div class="paragraph">
<p>So, why does Python have so many ways to do indentation? Mostly it&#8217;s
historical reasons. For our purposes, we&#8217;re going to start with using 4
spaces for indentation, because that&#8217;s VSCode&#8217;s default, and usually it&#8217;ll
handle it for us. The only rule is to be consistent with the amount of
indentation you use in your program.</p>
</div>
<div class="paragraph">
<p>At the end of the code, we <strong>call</strong> the function twice, once with the values
<code>5</code> and <code>False</code> for its arguments, and then a second time with the values <code>2.5</code>
and <code>True</code>. We print out both values right away. This code is just here to
test that the function worked, and we&#8217;ll replace it with something more
substantial.</p>
</div>
<div class="sect3">
<h4 id="_one_function_many_calculations">One function, many calculations</h4>
<div class="paragraph">
<p>Now that we have a function that prints a box, what else can we get? Delete the
last two lines of file you started (the print lines), and add this code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">size = input("Rug size (empty to quit): ")
while size != "":
    wants_fringe = input("Does the rug have fringe (y/n)? ")
    has_fringe = wants_fringe == "y"
    cost = square_rug_cost(float(size), has_fringe)
    print(cost)

    = Get the size for the next rug
    size = input("Rug size (empty to quit): ")
print("Goodbye")</code></pre>
</div>
</div>
<div class="paragraph">
<p>We can price (square) rugs over and over!</p>
</div>
<div class="paragraph">
<p>So now our program just loops as long as the user gives us a size, asks if
they want fringe with that, and then calculates and prints the rug price.
Instead of providing literal values for the function call, it uses two
variables, <code>size</code> and <code>has_fringe</code>. <code>has_fringe</code> is <code>True</code> when the user
provided <code>"y"</code> in their input, and <code>False</code> if the user provided any other
input. When we call <code>square_rug_cost</code>, we look up the values for those
variables and provide them to the function. We do <strong>not</strong> provide the variables
themselves! Only the values go to the call, and the variables are unrelated!</p>
</div>
<div class="paragraph">
<p>That&#8217;s good, but it actually took more lines of code than if we&#8217;d just
written it all as one block&#8230;&#8203; We&#8217;ll come back to that. For now, bear with me
two more steps. First, we will turn that input into its own function. Then,
we&#8217;re going to do make two similar functions for a rectangular rug. While
that will look like more code than we needed, it will pay off when we add
circles and start talking about abstraction.</p>
</div>
<div class="paragraph">
<p>But wait a minute, why do we have <code>cost</code> in two different places? Those are
actually two completely separate variables, in what we call different scopes.
Every function starts a new <strong>scope</strong>, which is a way to set a new group of
variables it knows about. A function knows about all the variables in any scope
outside of it, as well as all the variables it declares. However, the variables
that get declared <em>inside</em> the function aren&#8217;t visible further out. This neatly
allows each function to do its own work without stepping on the toes of other
functions! Also, the base level of every file is its own scope.</p>
</div>
<div class="paragraph">
<p>Aside from files, only functions with <code>def</code> define new scopes. The body of a
<code>while</code> loop or <code>if</code> block does not create a new scope!</p>
</div>
<div class="paragraph">
<p>Let&#8217;s take that while loop, and break it into a function and a loop. Delete
everything you typed in the last section, and type this instead.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>If you&#8217;ve gone through appendix 2 on source control, this would be a good
time to make a commit, to keep that version of the file which does the loop &amp;
calculation in the same block.</p>
</div>
</blockquote>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">def compute_square_rug():
    size = float(input("Rug Size: "))
    fringe = input("Does the rug have fringe (y/n)? ")
    fringe = fringe == "y"
    cost = square_rug_cost(size, fringe)
    print(cost)

while input("Price a rug (y/n)? ") == "y":
    compute_square_rug()</code></pre>
</div>
</div>
<div class="paragraph">
<p>But why are we adding more code when it just does the same thing!? ARGH!
I asked you to stay with me one more step, before we see the pay off.
First, delete the last two lines (the while loop that asks whether to
price another rug), and then add the following.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p>Before deleting the loop, this is another good time to make a commit&#8230;&#8203;</p>
</div>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">def rectangular_rug_cost(width, height, fringe):
    area = width * height
    cost = area * 5
    if fringe:
        perimeter = width * 2 + height * 2
        cost += perimeter * 1.5
    return cost

def compute_rectangular_rug():
    width = float(input("Rug width: "))
    height = float(input("Rug height: "))
    fringe = input("Fringe (y/n)?: ") == "y"
    print(rectangular_rug_cost(width, height, fringe))

while input("Price another rug (y/n)? ") == "y":
    rug_type = input("(1) square or (2) rectangular? ")
    if rug_type == "1":
        compute_square_rug()
    elif rug_type == "2":
        compute_rectangular_rug()</code></pre>
</div>
</div>
<div class="paragraph">
<p>At this point, we&#8217;ve written four functions. For each rug type, we have two
functions - one to perform the calculation, and one to perform the user
input. So why would we write all four of these, instead of just one loop? The
first answer is to make it easier to read and understand. One big function or
loop body would be shorter to write, yes, but in software engineering there&#8217;s
a somewhat paradoxical fact people read any given code many times, while they
write it once and edit it maybe a couple more times. You&#8217;ve likely seen this
yourself while trying to get your prior programs to work - you would run it,
it wouldn&#8217;t work right or you&#8217;d get an error, and then you had to go back
through many times reading it to figure out what it was doing.</p>
</div>
<div class="paragraph">
<p>By separating out each task into functions like this, you are using
<em>abstraction</em>. Each function lets us move from handling the details of getting
input or calculating a rug size, to instead working with the <strong>idea</strong> of getting
input or calculating the rug&#8217;s size. Why is this useful? Mainly, it means
that now whenever I think about calculating a rug, I don&#8217;t need to remember
the formulas for its area and perimeter, I only need to know whic arguments
are necessary.</p>
</div>
<div class="paragraph">
<p>It also gives us a good separation of concerns. That&#8217;s a fancy way of saying
the opposite of what was in the last paragraph - from the ouside, I only need
to know what arguments to pass the function and it does the work. I can
delegate to it, and trust it will do the work. From the inside, I only need
to take those arguments and do the calculation. I don&#8217;t care how I got those
arguments! The could come from a command line interface, like here, or in
chapter 5, they could come from a web server which provides this
functionality to customers online. That separation is a great boon that
abstraction using functions gives us.</p>
</div>
</div>
<div class="sect3">
<h4 id="_anatomy_of_a_function">Anatomy of a function</h4>
<div class="paragraph">
<p>Let&#8217;s cover the critical pieces of a function again.</p>
</div>
<div class="paragraph">
<p>It starts with the Python keyword <code>def</code> - short for "Define", and used here
to "define" a function. The next word, <code>square_rug_cost</code> or
<code>calculate_rectangular_rug</code>, is the identifier which tells Python what to
name your function. It is the word you&#8217;ll use to refer to the function in the
future, like variables elsewhere. The parentheses mark the <strong>arguments</strong> to the
function. Arguments are variables, but variables that are only visible and
valid inside the function. The function declaration ends with the <code>:</code>.</p>
</div>
<div class="paragraph">
<p>The definition of the function is everything happening below that line at the
next indentation level. Remember that in Python, whitespace is important. An
<strong>indentation level</strong> is all code which has the same amount of leading spaces -
in our case, four. Just like in <code>if</code> and <code>for</code> and <code>while</code> loops, this code at
the same level of indendation is the <strong>function body</strong> is what gets executed
each time you call your function.</p>
</div>
<div class="paragraph">
<p>Ok, let&#8217;s write one more function, this time to combine the two rugs we had
before. Again, delete the "Price another rug" while loop, and add this.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">def choose_rug():
    type = input("Would you like to price a (S)quare rug or a (R)ectangular rug? ")
    if type == "S" or type == "s":
        compute_square_rug()
    elif type == "R" or type == "r":
        compute_rectangular_rug()

while input("Price another rug (y/N)? ") == "Y":
    choose_rug()</code></pre>
</div>
</div>
<div class="paragraph">
<p>What all have we done here? We took a program that had a single flow of data,
with variables all over the place, and found small isolated chunks of work. We
took those isolted, self-contained bits of work and gave them names by creating
functions. We had to create all the functions in our program before the bottom,
when we actually call them. Overall we traded some additional global complexity
for less local complexity.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p><strong>Like a recipe</strong> If we were writing a cookbook, we have a lot of different
ways to write recipes. We could cram all the steps together, and we could be
very explicit about each one. "Take the onions. Remove the skins. Cut the unions
into thin slices. Turn on the oven to medium heat. Put a sauce pan on the oven.
Heat oil &amp; butter in the pan. When the oil and butter are hot, add the onions.
Occaisionally stir the onions for 10 minutes for softened and translucent. For
caramelized onions, add sugar at 10 minutes and continue stiring occaisionally
for another 35 minutes."</p>
</div>
<div class="paragraph">
<p>If this were a recipe for a steak dinner, that&#8217;s a lot of steps that aren&#8217;t
really related to the steak itself! And are we going to repeat those steps every
other dish that calls for softened or caramelized onions? I would hope not.
Instead we make a new recipe, "Caramelized Onions", and whenever another dish
calls for them we just say "2 cups caramelized onions, see page such and such."
That&#8217;s exactly what we&#8217;re doing with the functions here! Finding self-contained
pieces that can be used repeatedly, rather than repeating ourselves every time
over and over again.</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_exercises_5">Exercises</h4>
<div class="ulist">
<ul>
<li>
<p><strong>Rugs</strong> Write functions for a circular rug and let users choose circular
rugs in the input.</p>
</li>
<li>
<p><strong>Recipe Measurements</strong> Revisit the <code>measurements.py</code> file from chapter 1.
Create functions for common parts that are duplicated or otherwise should be
grouped in the file. No peeking, but [here&#8217;s my breakdown](./recipe_fns.md)</p>
</li>
<li>
<p>Write functions for exercises in chapter 1.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Functions are a really important concept in programming and software engineering,
so now, let&#8217;s go back to the text book and take a close look at how they execute.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_format_strings_in_python">Format strings in Python</h3>
<div class="paragraph">
<p>Thus far in python, we&#8217;ve been using string concatenation to get the formatting
and display we want. In this section, we&#8217;re going to look at python format
string and rewrite the functional hilo we used in the last section using format
strings. After this section, the workbook will switch entirely to using format
strings as we go forward.</p>
</div>
<div class="paragraph">
<p>A format string in python looks almost like a normal string, except it has an
<code>f</code> (for format) before the opening quote, and inside the string, it can
reference variables in the surrounding scope by wrapping them using curly braces
- <code>{ }</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">balance = 372.15
print(f'Your current balance is ${balance} dollars.')</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here we have the variable, <code>balance</code>, and the format string,
<code>f&#8217;Your current balance is ${balance} dollars.'</code>. This will format the value of
balance into the string and print it out: <code>Your current balance: $372.15.</code></p>
</div>
<div class="paragraph">
<p>This approach, using <code>f&#8217;Format {data}'</code>, is actually a shorthand. The values in
the <code>{data}</code> brackets come from variables that are available to the program.
It&#8217;s a convenient shorthand for the longer form <code>'Format {}'.format(data)</code>.
There are a few things to keep in mind about the longer form, but it does have
a lot of benefits. Chiefly, by using the <code>''.format()</code> form, you can store the
template string itself in a variable and pass it around your program. In most
large software, this is how we handle translating user interfaces between
languages - define all the user readable strings, and then choose the right one
while our translators handle the hard work of getting the various forms right!</p>
</div>
<div class="paragraph">
<p>The <code>format()</code> form also differs in that the arguments are positional - you can
put as many variables into the <code>format()</code> method call as you like, and when the
template string is filled in, values are used from left to right in the <code>{}</code>
blocks. When you use the <code>f''</code> format, you always specify the variables that go
into each <code>{data}</code> block.</p>
</div>
<div class="sect3">
<h4 id="_formatted_hilo">Formatted HiLo</h4>
<div class="paragraph">
<p>Let&#8217;s look back at HiLo, but this time using format strings</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">def calc_winnings(number, guesses):
    new_winnings = (6 - guesses) * 10
    print(f"You won {new_winnings} dollars!")
    winnings = winnings + new_winnings
    print(f"Your latest winnings are {winnings} dollars!")
    return winnings

def play_again():
    again = input("Play again? (Y/n) ")
    return again != "n"

def finished(winnings):
    print(f"Thank you for playing! Your total winnings were {winnings} dollars!")</code></pre>
</div>
</div>
<div class="paragraph">
<p>That&#8217;s all there is to it! Pretty easy, right? And I thin it&#8217;s much more legible
and it is definitely easier to work with - no need to <code>str(num)</code> all the time!</p>
</div>
</div>
<div class="sect3">
<h4 id="_formatting_options">Formatting Options</h4>
<div class="paragraph">
<p>There are a huge number of formatting options we can do. We can set a certain
amount of padding, so if we were making a table, the output would always take
10 spaces whether the string was 2 or 6 or however many characters wide. We can
format numbers to always have a certain precision after the decimal point, or
have certain types of separators between every 3 digits. Rather than listing
them all here, I&#8217;ll recommend visiting <a href="https://pyformat.info/" class="bare">https://pyformat.info/</a> and reading their
excellent documentation. (As you can tell, we&#8217;re using the "New" format.) That
said, we will be using some of these as we go further in the book.</p>
</div>
</div>
<div class="sect3">
<h4 id="_exercises_6">Exercises</h4>
<div class="ulist">
<ul>
<li>
<p>Revisit some or all of your programs and make them use format strings
instead of string concatenation.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When you&#8217;ve gotten all your programs using format strings for beautiful output,
we can learn about [multiple pieces of data with arrays](../03_arrays/README.md)</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_arrays_in_python">Arrays in Python</h3>
<div class="paragraph">
<p>In this section, we&#8217;re going to do some math on sets of numbers. We&#8217;re going
to write a couple functions to determine some statistics about these sets of
numbers. Just like chapter 1, the math is NOT the interesting bit here! Focus on
the code and the programming, and if you&#8217;re interested, you can follow up on the
math on Wikipedia.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s start a new program, <code>arrays.py</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">data = range(2, 20, 3)
for i in data:
    print(i)</code></pre>
</div>
</div>
<div class="paragraph">
<p>When we run this, we get 6 lines:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>2
5
8
11
14
17</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>`range` is a built in function that gives us an array of integers. The first
integer in the array is `2`, the first number in the arguments. The array will
grow up to (but not including) `20`, the second number. The last argument, `3`,
tells the range how many to increment by each time. This argument is optional,
and defaults to `1`. So if you just want a normal list of 20 numbers, you can
do `range(0, 20)` to get the numbers 0 through 19, or `range(1, 21)` to get
1 through 20. Because we set it to 3, we jump several at a time.</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>This is the data we'll use to test the functions, and then we'll get a bigger
data set to answer a real science question!</pre>
</div>
</div>
<div class="paragraph">
<p>Add this code at the end of the file:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>[source,python]</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre> def sum(my_array):
    total = 0
    for val in my_array:
        total += val
    return total

data_sum = sum(data)
print(f"Data sums to {data_sum:.2f}")</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>When we run it, we should see the output from above, and this line as well:</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre> ----
Data sums to 57.00
 ----</pre>
</div>
</div>
<div class="paragraph">
<p>Here, we define a new function, <code>sum</code>. It takes one argument, <code>my_array</code>,
which will be the array of data to operate on. Sum, or summation, is just a
really fancy way of saying "Add up all the numbers". We do that by starting
the variable <code>total</code> with the value 0, and then we use a <code>for &#8230;&#8203; in &#8230;&#8203;</code>
loop to get every item. With a for loop, we name the variable in the first
area, and then provide the value to loop over as the second (before the <code>:</code>).
So this <code>for &#8230;&#8203; in &#8230;&#8203;</code> the array to loop over is <code>my_array</code> and the
variable for each time is <code>val</code>.</p>
</div>
<div class="paragraph">
<p>The body of the loop is one line - <code>total += val</code>. We saw <code>+=</code> in the rugs and
it&#8217;s just a short way to say <code>total = total + val</code>.</p>
</div>
<div class="paragraph">
<p>The body of the loop will execute one time for every value in <code>my_array</code>. Each
time before the body executes, python will assign the next value in <code>my_array</code>
to the variable <code>val</code>.</p>
</div>
<div class="paragraph">
<p>After the loop body (because it&#8217;s back to the first level of indendation), we
return the total. And that&#8217;s it for the function!</p>
</div>
<div class="paragraph">
<p>Back at the file level, we run the function using the data we got above, and
the print it using a format string. This string uses <code>{data_sum:.2f}</code>, which
takes <code>data_sum</code>, treats it as a <code>f</code>loat, and provides 2 digits of precision.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s keep going with a function to calculate the average. The average, or mean,
of a set of numbers is found by adding all of them up and dividing by the total
number of items in the set.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">def avg(my_array):
    total = sum(my_array)
    length = len(my_array)
    return total / length

data_avg = avg(data)
print(f"Data average is {data_avg:.2f}")</code></pre>
</div>
</div>
<div class="paragraph">
<p>The new line of output should be</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Data average is 9.50</pre>
</div>
</div>
<div class="paragraph">
<p>This function starts the same way as sum, by giving it the name <code>avg</code> and taking
one parameter, my_array. But then, instead of adding up all the numbers itself,
it just uses the function we wrote in the last exercise. Then it uses the built
in function <code>len</code> to get the length of the array. Keep <code>len</code> in mind, as it&#8217;s
the canonical way in python to get the size of any complex object - arrays or
otherwise! At the end, we print out the same way.</p>
</div>
<div class="paragraph">
<p>We have one last function, which is a lot more complex. The standard
deviation of a set of numbers describes their statistical distribution. If
the standard deviation is a larger number, it means there is more variability
in the sample. The numbers are more different to each other than similar. If
the standard deviation is smaller, the numbers are more clustered together.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>The formal definition of the standard deviation involves taking all the
numbers in the array, squaring the difference in the average of all values from
the single value, summing all those squares, dividing that sum by the number of
values in the data set, and finally taking a square root of the whole thing. Ask
your nearest stats professor for details, and trust the math part of the code
below :)</p>
</div>
</blockquote>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">import math
def std_dev(my_array):
    my_array_average = avg(my_array)

    diffs_squared = []
    for val in my_array:
        diff = val - my_array_average
        diff_squared = diff ** 2
        diffs_squared.append(diff_squared)

    sum_of_squares = sum(diffs_squared)
    length = len(my_array)
    return math.sqrt(sum_of_squares / length)

data_std_dev = std_dev(data)
print(f"Data std dev is {data_std_dev:.2f}")</code></pre>
</div>
</div>
<div class="paragraph">
<p>When we run this, we find quite a wide standard deviation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Data std dev is 5.12</pre>
</div>
</div>
<div class="paragraph">
<p>Which makes sense. We don&#8217;t have a lot of numbers, and they have a bit of space
between them. Let&#8217;s get a real data set, and try to answer an
[old wive&#8217;s tale](<a href="https://www.bbc.com/future/article/20171127-the-truth-about-three-childbirth-myths" class="bare">https://www.bbc.com/future/article/20171127-the-truth-about-three-childbirth-myths</a>):
"First babies arrive late". We&#8217;ll be using a dataset taken from the Unite States
Center for Disease Control&#8217;s 2002 National Family Growth Survey (or US CDC 2002
NFGS) for short. This survey captures a myriad of details about tens of
thousands of pregnancies in the United States in the one year alone. From that
data set, I&#8217;ve create a small file you can download and save next to your
<code>arrays.py</code> program:
<a href="https://raw.githubusercontent.com/DavidSouther/software_craftsmanship/master/02_functions_arrays_strings/03_arrays/data.py"><code>data.py</code></a></p>
</div>
<div class="paragraph">
<p>Once this file is saved, go back to <code>arrays.py</code> and add</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">from data import PREGNANCIES

# Set up the lists to calculate sums on
preg_weeks_first_babies = []
preg_weeks_second_babies = []

for pregnacy in PREGNANCIES:
    order = pregnacy[0]
    weeks = pregnacy[1]
    if order == 2:
        preg_weeks_second_babies.append(weeks)
    elif order == 1:
        preg_weeks_first_babies.append(weeks)

print(f"First babies are born at an average of {avg_first_babies:.2f} weeks.")
print(f"First babies have a standard deviation of {std_dev_first_babies:.2f} weeks")
print(f"Second babies are born at an average of {avg_second_babies:.2f} weeks.")
print(f"Second babies have a standard deviation of {std_dev_second_babies:.2f} weeks")</code></pre>
</div>
</div>
<div class="paragraph">
<p>Let&#8217;s find out if the old wive&#8217;s tale holds up to statistical scrutiny</p>
</div>
<div class="listingblock">
<div class="content">
<pre>First babies are born at an average of 38.58 weeks.
First babies have a standard deviation of 2.68 weeks
Second babies are born at an average of 38.64 weeks.
Second babies have a standard deviation of 2.72 weeks</pre>
</div>
</div>
<div class="paragraph">
<p>The verdict is in - first and second babies have some difference on the order
of hours, certainly not the weeks claimed in the anecdote we&#8217;re questioning.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s take a closer look at this code we have above. First, we get the data that
we are interested in by using <code>from data import PREGNANCIES</code>. We&#8217;ve see simple
import statements before, like <code>import math</code>. This let us use <code>math.sqrt</code>, but
also gave us access to <code>math.sin</code> and <code>math.atan2</code>. If we don&#8217;t ever use the
trigonometry functions, why would we want to import all of them? The same thing
with this file- rather than importing the whole thing and asking for
<code>data.PREGNANCIES</code>, it&#8217;s way easier to just import the single thing we want. So
we use this <code>from &#8230;&#8203; import &#8230;&#8203;</code> form and fill it in with the file or library,
and the individual value that we want from that file.</p>
</div>
<div class="paragraph">
<p>Now that we have our pregnancies, we&#8217;re going to keep track of two arrays, one
for first babies and another for second babies. We saw with <code>range()</code> that we
could create an array with integers already filled in, but now we&#8217;re going to
start with an empty array (just like we started with empty string). The empty
array is <code>[]</code>, which says "This is a big long list that we can add things to
later". Later we will add to it not by using <code>+</code> like with trings, but instead
by calling <code>append</code> which is a function the array has to add data to it.</p>
</div>
<div class="paragraph">
<p>With our data keeping set up, we start our for loop over the pregnancies array.
If you looked at the data file, you may have seen that it&#8217;s actually a bunch of
arrays inside a big one. In python, we call a small fixed-length array (like
these ones, with two elements) a tuple. This is useful for exactly this case -
we want to keep pairs of data about each pregnancy in our list. The pieces of
data here are first, the order of the pregnancy (so whether this is the woman&#8217;s
first or second or fifth pregnancy), and second, the number of weeks into the
pregnancy she gave birth.</p>
</div>
<div class="paragraph">
<p>Inside the loop, we create two variables, <code>order</code> and <code>weeks</code>. Because each item
in <code>PREGNANCIES</code> is an array, we access the first and second elements
respectively. To do so, we use the <code>[index]</code> array access notation. We write the
variable which has the array, <code>pregnancy</code>. We then add <code>[]</code> immediately after
it. Finally, we use a variable or value to access the item we want - remember,
indexes start at zero. So <code>pregnancy[0]</code> gives us the first item in the tuple
(the array of two items), which our data file defines as the order of the
pregnancy. <code>pregnancy[1]</code> gives us the weeks' duration of of the pregnancy,
again which we know from the data file.</p>
</div>
<div class="paragraph">
<p>The loop body is several <code>if &#8230;&#8203; elif &#8230;&#8203;</code> block. It looks at the order, and
decides which of the lists we&#8217;re tracking it should append with the length of
the next pregnancy. If the order is great than 2, we will ignore it because we
are only interested in either a woman&#8217;s first or second pregnancy. Then if the
order is two, we append the length to the array of numbers of weeks in a second
pregnancy. If the order is one, we put it in the other array.</p>
</div>
<div class="paragraph">
<p>After we&#8217;ve split the <code>PREGNANCIES</code> data set up this way, we exit the <code>for</code> loop
and pass our two arrays into our functions we had defined for <code>avg</code> and
<code>std_dev</code>. With these results back, we print them out for the user!</p>
</div>
<div class="sect3">
<h4 id="_exercises_7">Exercises</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Statistics</strong></p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Using the <code>sum</code> function above, trace the execution of these programs:</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p><code>print(sum([15, 15, 15, 14, 16]))</code></p>
</li>
<li>
<p><code>print(sum([2, 7, 14, 22, 30]))</code></p>
</li>
</ol>
</div>
</li>
<li>
<p>Using the <code>avg</code> function above, trace the execution of these programs:</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p><code>print(avg([15, 15, 15, 14, 16]))</code></p>
</li>
<li>
<p><code>print(avg([2, 7, 14, 22, 30]))</code></p>
</li>
</ol>
</div>
</li>
<li>
<p>Using the <code>std_dev</code> function above, trace the execution of these programs:</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p><code>print[15, 15, 15, 14, 16]</code></p>
</li>
<li>
<p><code>print(std_dev([2, 7, 14, 22, 30]))</code></p>
</li>
</ol>
</div>
</li>
<li>
<p>In statistics, population <strong>variance</strong> is a part of the standard
deviation. Specifically, it&#8217;s the part of calculating a standard
deviation that sums the squares of differences and divides by N, before
taking the square root. In other words, the standard deviation is the
square root of the variance of the array of data. Rewrite your <code>std_dev</code>
function to perform the first part of the calculation, the <code>variance</code>,
in its own function, and then use that function to calculate the
standard deviation.</p>
</li>
</ol>
</div>
</li>
<li>
<p><strong>Recipes</strong> Use arrays to store the ingredients in each recipe. For each
ingredient, the array should have a tuple of three items, including the
name, the default amount, and the measurement size. Instead of printing each
ingredient specifically, use a function which loops over the array to print
each ingredient. Don&#8217;t forget the scale parameters!</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>When you&#8217;ve completed the exercises, we can wrap up this chapter in the textbook.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_functions_arrays_and_strings_2">Functions, Arrays, and Strings</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_objects_and_properties">Objects and properties</h3>
<div class="paragraph">
<p>In most of our Python up to this point, we&#8217;ve been using single variables to
refer to single values. We have one variable that refers to an <code>area</code>, which we
know to keep in mind as an area of a rug based on context. We have one variable
<code>n</code> which we set to <code>len(my_array)</code> to track the size of an array. We have one
single variable that we set a couple times to hold the perimeter cost of a rug.</p>
</div>
<div class="paragraph">
<p>If we didn&#8217;t have scopes, this would be ridiculous - every different function
that wanted to talk about an <code>area</code>  would need to come up with a unique name for its variable!
Whether its rugs or the size of a floor in your house, you&#8217;d end up with something
like <code>area_rug_when_computing_cost</code> and <code>area_rug_from_user_input</code>! Scopes at
least let us have one <code>area</code> within the function <code>rug_cost</code>, and we can know by
context what it&#8217;s being used for.</p>
</div>
<div class="paragraph">
<p>But keeping all these variables on their own is kind of a pain - a rug doesn&#8217;t
just have an <code>area</code>, it also has a <code>perimeter</code> and a <code>side_length</code>. In the
programs in this chapter, we&#8217;re going to learn about another way to group bits
of relevant data - <strong>objects</strong>.</p>
</div>
<div class="paragraph">
<p>Objects are bundles of values that are all related to one another in some
contextual way. For the rug, an object would keep track of all the values for
its side length, whether it has fringe, its area and perimeter and cost, and
whatever else we need to access from it. Once we put a rug object together, we
can have one variable <code>rug</code> and get all those values from it.</p>
</div>
<div class="paragraph">
<p>We structure the object using <strong>properties</strong>. Properties are variables that are
tied to a single object. Just like a variable, they have an <strong>identifier</strong> and a
<strong>value</strong>. Unlike variables, they aren&#8217;t bound to a scope, but rather are stored
with an object. Just like variables, their values can be whatever is needed&#8201;&#8212;&#8201;a number, a string, an array, or even another object!</p>
</div>
<div class="paragraph">
<p>Before we go back to our rugs example, we&#8217;re going to work with a built-in
object type first, <code>datetime</code>.</p>
</div>
<div class="sect3">
<h4 id="_dates">Dates</h4>
<div class="paragraph">
<p>In computer programming, handling dates can get complicated. Unlike numbers,
dates have dozens of rules controlling how a date is handled. From different
numbers of days in months, to leap years, to "11th" compared to "21st", dates
require much special handling from computer programmers.</p>
</div>
<div class="paragraph">
<p>In Python, the basic date handling is in a module called datetime. We&#8217;re going
to start by actually grabbing two items from it, <code>datetime</code> and <code>timedelta</code>
which we&#8217;ll explain in-depth later. (While we&#8217;re here, we&#8217;ll also grab our
trusty [<code>colors.py</code>](./colors.py) - download it again or copy it if you are in a
new folder).</p>
</div>
<div class="paragraph">
<p>Make a new file, <code>calendar.py</code>, and let&#8217;s get going!</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">import colors
from datetime import datetime, timedelta
from time import sleep</code></pre>
</div>
</div>
<div class="paragraph">
<p>These lines allow us to use <code>datetime</code> later in the program. It&#8217;s similar to
<code>math</code> from chapter 1. For us, we want the function <code>datetime.now()</code>, which gives
us a "date" thing, seperate from an integer, float, or string, that allows us to
check the month, day, and year.</p>
</div>
<div class="paragraph">
<p>A <code>datetime</code> is an object with properties for each of the things you might
expect - <code>hour</code> gives us the numerical hour in the day that that datetime
represents; <code>month</code> the month of the year, <code>microsecond</code> the number of
millionths of a second the datetime was created at.</p>
</div>
<div class="paragraph">
<p>When we have a single <code>datetime</code>, these values don&#8217;t change unless we tell it
to! When we used the function <code>datetime.now()</code>, it looked at the computer&#8217;s clock
<strong>at that moment in time</strong>, made a note of it, and that moment <strong>at a point in time</strong>
is what we can look at. If we want a different <code>datetime</code>, we have to call <code>datetime.now()</code>
<strong>another time</strong>, and this time we get back a <strong>different</strong> datetime! It doesn&#8217;t
update the one that we had gotten before. Let&#8217;s see what that looks like.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">moment_1 = datetime.now()
sleep(0.5)
moment_2 = datetime.now()
sleep(1.5)
moment_3 = datetime.now()

print(moment_1.hour, moment_1.minute, moment_1.second, moment_1.microsecond)
print(moment_2.hour, moment_2.minute, moment_2.second, moment_2.microsecond)
print(moment_3.hour, moment_3.minute, moment_3.second, moment_3.microsecond)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Running that at a little before 3 pm I got this output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>14 48 36 731726
14 48 37 235577
14 48 38 736215</pre>
</div>
</div>
<div class="paragraph">
<p>You should have something similar - the second one is about .5 seconds after the
first, and the third is about 2 second after the first!</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><code>datetime</code> tracks hours using 24 hours in a day. Later in this section, we&#8217;ll
see how to get AM/PM hours.</p>
</div>
</blockquote>
</div>
<div class="sect4">
<h5 id="_desktop_calendar">Desktop Calendar</h5>
<div class="paragraph">
<p>Before we dive in to the rest of this program, let&#8217;s take a look at what it&#8217;ll
show us. It&#8217;s going to be a program that prints a calendar of the current month.
The days of the week will be along the top, with weekends a different color.
It will also mark today a specific color, as well as any holidays we have this
month. At the bottom, it will print the number of days as well as the number of
workdays until the next holiday, and finally it&#8217;ll have a digital clock printing
the time in H:M format.</p>
</div>
<div class="paragraph">
<p>It will look like this when we&#8217;re done:</p>
</div>
<div class="paragraph">
<p>![Desktop Calendar](./desktop_calendar.png)</p>
</div>
<div class="paragraph">
<p>Let&#8217;s take a look at a function that returns the string for which month of
the year a date is. Remove everything but the imports above, and add this
instead. The <code>def</code> keyword starts starts <strong>def</strong>ining a section of code. The
parentheses tell python it is a function, while <code>month</code> gives it a name.
Finally, <code>date</code> names an argument for the function. This will take a
<code>datetime</code> object, not just a number!</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">def month(date):
    if date.month == 1:
        return "January"
    elif date.month == 2:
        return "February"
    # 10 more cases for you to write out

print(month(datetime.now()))</code></pre>
</div>
</div>
<div class="paragraph">
<p>Running that this morning, it told me it was <code>May</code> as expected!</p>
</div>
<div class="paragraph">
<p>In this function, we have the argument date. We expect callers to pass a
datetime as the argument. One property of a datetime is <code>month</code>, which gives us
the numeric month of the year starting from 1 as January. We access a property
on an object using a <code>.</code>. So <code>date.month</code> says go to the value in the variable
<code>date</code>, find its property <code>month</code>, and use <strong>that</strong> value for our expression.</p>
</div>
<div class="paragraph">
<p>At this point, we can do the top bar of our calendar. Replace the print line
with this bit of code.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">moment = datetime.now()
month_face = f"{moment.day} {month(moment)} {moment.year}"
print(f"{month_face:^28}")</code></pre>
</div>
</div>
<div class="paragraph">
<p>And running that, we see</p>
</div>
<div class="listingblock">
<div class="content">
<pre>        19 May 2020</pre>
</div>
</div>
<div class="paragraph">
<p>Let&#8217;s look at this bit by bit. We get a single moment, so that we can use that
one moment in time several times, once to get the day, once for the month, and
once for the year. We get the <code>day</code> as a property of <code>moment</code> using <code>.day</code>, and
the same for <code>.year</code>. We use the <code>month</code> function we just wrote to get the full
name of the month, rather than the number.</p>
</div>
<div class="paragraph">
<p>We start a new variable, <code>month_face</code>. This is so we can easily center it, on
the next line. We build it by using a <strong>template string</strong> which we introduced
in the strings section last chapter. We know it&#8217;s a format string because it
has an <code>f</code> right in front of it. It accesses two different properties on the
object returned by the <code>no</code> function (which, again, is a datetime)&#8201;&#8212;&#8201;<code>day</code> and
<code>year</code>. It also takes the entire object and passes it to our <code>month</code> function we
just wrote above.</p>
</div>
<div class="paragraph">
<p>We store this in the variable <code>month_face</code> so that we can use a second format
string to center the text we just created. We do this with the <code>:\^</code> format
specifier. In chapter 2, we used <code>:.2f</code> to specify the amount of precision we
wanted in a floating point number. In the format string, the <code>:</code> marks where
the variable ends, and when modifiers to the formatting begin. There are
three that are useful when working with text, and those are <code>:&lt;</code>, <code>:\^</code>, and
<code>:&gt;</code>. All three take a number after the arrow, and they fill out the text
with extra spaces on the sides so that the final string has many characters
(including spaces) as the number specifies. The text is padded with
whitespace after, around, or before the value it got from the left of the
<code>:</code>. That is to say, these all let us left, center, and right justify a
string of text. In this case, we use 28 characters because that&#8217;s how wide
our calendar will be.</p>
</div>
</div>
<div class="sect4">
<h5 id="_calendar_days">Calendar Days</h5>
<div class="paragraph">
<p>Let&#8217;s start to build out the calendar days part of the program. We&#8217;re going to
do it in stages, starting simple and adding to it as we go. We still want to get
a plan of action before we start.</p>
</div>
<div class="paragraph">
<p>Thinking through what the calendar should look like, it should have 7 columns,
one for each day of the week. It will have 4 to 6 rows, depending on how many
weeks the month takes up. Each day in the month, then, will end up having a
column, based on which day of the week it is. It will also have a row&#8201;&#8212;&#8201;but the
row its in will depend on how many weeks have come before it at that point. In
a python date, the <code>weekday()</code> function will give us a number between 0 and 6&#8201;&#8212;&#8201;0 means Monday, 1 means Tuesday, up to 6 being Sunday. So if this gives us the
column to put the day in, what about the row?</p>
</div>
<div class="paragraph">
<p>For the row, we can just keep track of what row we&#8217;re currently in, and
increment it by one each time we get to a Sunday. With this plan, we need to do
a couple things. We need to loop through all the days in a single month,
tracking which week of the month ourselves and increasing it every time we get
to a sunday. Then for each day in the month, we need to print it out using the
weekday and week of the month to choose a row and column to print it in. Two
separate things to do means two separate functions! Let&#8217;s write ourselves a
<code>print_day</code> function first, which takes a <code>datetime</code> and week to print it in.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">def print_day(date, row):
    column = 2 + 4 * date.weekday()
    print(colors.at(row, column), end="")
    print(date.day)

print_day(datetime.now(), 1)</code></pre>
</div>
</div>
<div class="paragraph">
<p>For me, on Tuesday the 19th, I see a few spaces and then <code>19</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>     19</pre>
</div>
</div>
<div class="paragraph">
<p><code>date.weekday()</code> is a function which will return the weekday (0 is Monday, 6
is Sunday) for the date it&#8217;s attached to. For our calendar, we want each
weekday to take up 4 spaces, so that&#8217;s why we multiply by 4 - to skip past
the other earlier days that week. The <code>2 +</code> is just an initial padding to not
squish everything up against the left side of the screen. With that row and
column, we print <code>colors.at()</code> to move the cursor, but we also add this new
piece <code>end=""</code>. Usually when we print, it moves the cursor down to the next
line immediately. We don&#8217;t want that to happen, and suppress that behavior
using <code>end=""</code>.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>The reason it&#8217;s called <code>end</code> is because normally, python uses the special
string <code>"\n"</code> to mean "New line", and inserts it automatically at the end of
every print string. You can think of it as every time you print, you are really
doing <code>print(my_string, end="\n")</code>. Because 9 times out of 10 this is the
behavior we want, it&#8217;s much easier to do it by default instead of requiring
every time we use print to include it. This is the escape hatch for when we
don&#8217;t want the default.</p>
</div>
</blockquote>
</div>
</div>
<div class="sect4">
<h5 id="_calendar_weeks">Calendar Weeks</h5>
<div class="paragraph">
<p>Now that we can print one day, let&#8217;s do the <code>print_month</code> function which will
print an entire month for us. Delete the <code>print_day</code> testing line, and then add
&amp; test this <code>print_month</code> function.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">one_day = timedelta(1)
def print_month(date, first_week_row):
    day_in_month = datetime(date.year, date.month, 1)
    week = 0
    while day_in_month.month == date.month:
        print_day(day_in_month, first_week_row + week)
        if day_in_month.weekday() == 6:
            week += 1
        day_in_month += one_day

print(colors.CLEAR)
print_month(datetime.now(), 2)</code></pre>
</div>
</div>
<div class="paragraph">
<p>There&#8217;s a bit more to this one, as we might expect when we need a loop. The
function declaration looks about the same as for <code>print_day</code> - a <code>date</code> to
tell us which month we&#8217;re interested in, and <code>first_week_row</code> which we will
use to know how far down the page to print the month part of the calendar.
The loop will track <code>day_in_month</code>. Each iteration of the loop, we add one
day to it, and keep looping until the tracking variable is no longer in the
same month as the original <code>date</code>. Each time through, we also track the
current week within the month, incrementing it after printing each Sunday.</p>
</div>
<div class="paragraph">
<p>Above that, though, we have a constant - <code>one_day = timedelta(1)</code>. What do you
think that is?</p>
</div>
<div class="paragraph">
<p>Where a <code>datetime</code> tells us a specific point in time, <code>timedelta</code> describes the
amount of time between two points in time. There are two ways to make a
<code>timedelta</code>. The first is to subtract one date from another. (No need to type
this next example yourself.)</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">time_then = datetime.now()
sleep(10)
time_now = datetime.now()
time_difference =time_then - time_now
print(time_difference)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Prints out</p>
</div>
<div class="listingblock">
<div class="content">
<pre>0:00:10.001196</pre>
</div>
</div>
<div class="paragraph">
<p>Which tells us it took 10 seconds and some change between those two datetimes we
created!</p>
</div>
<div class="paragraph">
<p>Once we have a timedelta, we can go the other way around.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">print(time_now)
print(time_now + time_difference)</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>2020-05-20 08:08:59.351762
2020-05-20 08:09:09.352958</pre>
</div>
</div>
<div class="paragraph">
<p>That works great for things like "How long until Christmas Day?" by creating a
datetime for the holiday, and subtracting today. We&#8217;re going to use it a bit
differently, by creating a datetime and timedelta directly from the calendar day
we&#8217;re trying to print out.</p>
</div>
<div class="paragraph">
<p>Quick recap of that: we have the date that we want to use to print a calendar
for the surrounding month. The caller of the printMonth function provides that.
In the printMonth function, we want to make a new datetime that corresponds to
the first day of the month. Then, we want to print that day (not the one the
user provided), and loop through all the days in the month. We get the next date
in the month by creating a timedelta which represents the concept of one day,
and then add that to the date representing the start of the month.</p>
</div>
<div class="paragraph">
<p>That bit alone looks like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">one_day = timedelta(1)
def print_month(date):
    monthly = datetime(date.year, date.month, 1)
    while monthly.month == date.month:
        print(monthly.day)
        monthly += one_day</code></pre>
</div>
</div>
<div class="paragraph">
<p>Running this with <code>print_month(datetime.now())</code>, I get this output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>1
2
3
4
... 25 more lines...
30
31</pre>
</div>
</div>
<div class="paragraph">
<p>So we have <code>one_day</code> which is the <code>timedelta(1)</code> to represent a single day. That
is defined at the file level - we&#8217;ll just use the same one every time we call
the function. We need a new datetime that represents the beginning of the month,
because the provided <code>date</code> variable is going to be any arbitrary point of time
within a month. We get that instance of the beginning of the month by creating
a new <code>datetime</code> with the same year and month as the one we&#8217;re given, but then
we set the <code>day</code> to <code>1</code> (the 1st), and don&#8217;t provide any values for the hours,
minutes, or seconds. This is the <code>datetime</code> which represents the point in time
at midnight of the first day of the month that our input date is in.</p>
</div>
<div class="paragraph">
<p>We&#8217;re going to take this datetime object, and keep adding one day to it. As long
as it&#8217;s still inside the month we started with, we&#8217;ll print it out. The
<code>datetime</code> will handle the logic itself for knowing how many days to use. We
just need to look at the <code>month</code> property every timearound.</p>
</div>
<div class="paragraph">
<p>Looking back at the first <code>print_month</code> function up above, we should now be able
to make sense of <code>week</code> and <code>first_row</code>. <code>first_row</code> is an argument used to tell
<code>print_month</code> how far down the page to start printing. <code>weeks</code> then tracks which
week of the month the loop is in, incrementing it whenever <code>monthly.weekday()</code>
is <code>6</code>, Sunday (incrementing <strong>after</strong> printing).</p>
</div>
<div class="paragraph">
<p>Run it again, and take some time to think through what we&#8217;ve just covered and
how it works together.</p>
</div>
</div>
<div class="sect4">
<h5 id="_highlighting_days">Highlighting Days</h5>
<div class="paragraph">
<p>Now that we have our calendar printing out, let&#8217;s make it highlight each day
based on whether it&#8217;s a weekday, a weekend, a holiday, or the current day. We
will do this by first writing a helper function for each of those cases, and
then by using those functions in the <code>print_date</code> function we already wrote.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">def is_weekend(date):
    # Monday is 0, Sunday is 6
    return date.weekday() &gt; 4

HOLIDAYS = [
    datetime(2020, 1, 1), # New Year's Day
    datetime(2020, 1, 20), # MLK Jr
    datetime(2020, 2, 17), # George Washington's Birthday
    datetime(2020, 5, 25), # Memorial Day
    datetime(2020, 6, 3), # 4th of July Holiday
    datetime(2020, 9, 7), # Labor Day
    datetime(2020, 10, 12), # Columbus Day
    datetime(2020, 11, 11), # Veteran's Day
    datetime(2020, 11, 26), # Thanksgiving Day
    datetime(2020, 12, 25), # Christmas Day
]

def is_holiday(date):
    return datetime(date.year, date.month, date.day) in HOLIDAYS

def is_workday(date):
    return not is_weekend(date) and not is_holiday(date)</code></pre>
</div>
</div>
<div class="paragraph">
<p>The first helper, <code>is_weekend</code>, is very easy. It just checks if the <code>weekday()</code>
is greater than 4 - remember, 0 is Monday and 5 is Saturday!</p>
</div>
<div class="paragraph">
<p><code>is_holidays</code> does a couple tricks that are new to us. First, it uses a block of
data that explicitly lists out the days that are considered holidays. While we
could write functions to calculate most of these (Thanksgiving is on the third
Thursday of November; Christmas is the weekday closest to the 25th of December)
I think it&#8217;s easier to just list them out. Besides, these holidays are only
correct for the US - by making it a block of data, we can just come along later
and change it to whatever days we need to for our locale. This type of data
driving programming is more common than you might expect!</p>
</div>
<div class="paragraph">
<p>The <code>is_holidays</code> function is then going to use the <code>in</code> operator to determine
whether a certain value appears in the array at all. <code>5 in range(1, 10)</code> would
return true, as would <code>"def" in "abcdefghi"</code>. But remember that a date is a
single point in time, so we normalize whatever date it is to be midnite exactly
of the date in question. This type of normalization is another very common
trick!</p>
</div>
<div class="paragraph">
<p>The last function, <code>is_workday</code>, almost reads like plain English. Workdays are
any day that aren&#8217;t a weekend or a holiday. Maye we should add vaction days in
here as an exercise&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>With these helpers in hand, we can expand our <code>print_day</code> function with some
color base on which of these conditions are true.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">def print_day(date, row):
    now = datetime.now()
    column = 2 + (4 * date.weekday())
    print(colors.at(row, column), end="")
    if date.day == now.day:
        print(colors.YELLOW, end="")
    elif is_holiday(date):
        print(colors.PURPLE, end="")
    elif is_weekend(date):
        print(colors.RED, end="")
    else:
        print(colors.WHITE, end="")
    print(date.day)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Using this in place of our <code>print_day</code> before, and testing using the
<code>print_month</code> function, should get us pretty close to the output we demoed at
the beginning of the chapter! We just need to add a couple pieces of "pretty
printing" before calling <code>print_month</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">def print_calendar():
    now = datetime.now()
    print(colors.CLEAR, colors.at(1, 1))
    print(" M   Tu  W   Th  F   Sa  Su")
    print_month(now, 3)

print_calendar()</code></pre>
</div>
</div>
<div class="paragraph">
<p>All we do here is grab the current datetime, clear the screen, and start writing
the calendar at the 4th row, first column. We add a row of the day of the week,
and then use <code>print_month</code> starting at row 6 to give us the days in the calendar
appropriately aligned. It should look like this, all said and done:</p>
</div>
<div class="listingblock">
<div class="content">
<pre> M   Tu  W   Th  F   Sa  Su
                 1   2   3
 4   5   6   7   8   9   10
 11  12  13  14  15  16  17
 18  19  20  21  22  23  24
 25  26  27  28  29  30  31</pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_recap">Recap</h4>
<div class="paragraph">
<p>In this section we looked at using two builtin Python objects, <code>datetime</code> and
<code>timedelta</code>. An object is a programming tool to group related data together.
Instead of having a bunch of variables that are near eachother and maybe have
the same name, we instead create an <strong>object</strong> that keeps all those values in
its <strong>properties</strong>. We can then use the single value of the object, rather than
needing to specify each piece of it separately every time.</p>
</div>
<div class="paragraph">
<p>Up next, we will look at how to create our own objects, when we revisit the
rugshop with classes.</p>
</div>
</div>
<div class="sect3">
<h4 id="_exercises_8">Exercises</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Vacations</strong> Add vacation days and give them a color.</p>
</li>
<li>
<p><strong>Clock face</strong> Look at more properties on datetime, and use them to print a
clock face. Bonus: Use the <code>format</code> function and Python&#8217;s datetime format
codes.</p>
</li>
<li>
<p><strong>Days until</strong> Using timedeltas, count the number of days between two dates.
Use this and your weekend/vacation checks to print "Days until/Workdays
until"</p>
</li>
<li>
<p><strong>Tick Tick Tick</strong> Using loops and <code>time.sleep</code>, make your clock tick by
updating every 10th of a second.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_python_classes">Python Classes</h3>
<div class="paragraph">
<p>In the last chapter, we wrote pairs of functions to calculate costs for rugs,
and to get user input. The function declarations started to get a bit unwieldy
and redundant.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">def square_rug_cost(size, fringe):
def compute_square_rug():
def rectangular_rug_cost(width, height, fringe):
def compute_rectangular_rug():
def circular_rug_cost(radius, fringe):
def compute_circular_rug():</code></pre>
</div>
</div>
<div class="paragraph">
<p>The idea of classes will separating each of these concepts into distinct pieces.
We can use those pieces in similar and interchangeable ways, and really free
ourselves from needing to track a large number of smallpieces by instead
tracking a small number of big pieces. Those big pieces can just hang out, do
their thing, and let us focus on other areas of our program as it grows.</p>
</div>
<div class="paragraph">
<p>On the flip side, with object oriented programming and using classes, we do want
to put a bit more effor in up front, thinking through what our design will be,
before we get down to brass tacks. This up-front thinking will let us
potentially shave a lot of time and effort down the road, if it turns out we
later built the wrong thing!</p>
</div>
<div class="paragraph">
<p>Before we start our class, then, let&#8217;s remind ourselves of what we&#8217;re trying to
achieve. Looking back at our last chapter&#8217;s rug functions, we have this</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">def square_rug_cost(size, fringe):
    area = size ** 2
    cost = area * 5
    if (fringe):
        perimeter = size * 4
        cost = cost + perimeter * 1.5
    return cost</code></pre>
</div>
</div>
<div class="paragraph">
<p>A square rug needs to track two pieces of data - whether it has fringe, and the
size of one edge. It then calculates the area, perimiter, and costs from those
pieces. Rectangular and circular look similar. Looking at this, we probably want
one class, <code>SquareRug</code>, which will take two properties, <code>size</code> and <code>has_fringe</code>.
It will have one method, <code>cost()</code>, which uses this same formula but gets the
data from its properties. Let&#8217;s see what this looks like in Python. Type and run
the following code in a new file.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">class SquareRug():
    def __init__(self, size, has_fringe):
        self.size = size
        self.has_fringe = has_fringe

    def cost(self):
        area = self.size ** 2
        cost = area * 5
        if (self.has_fringe):
            perimeter = self.size * 4
            cost = cost + perimeter * 1.5
        return cost

square_rug_1 = SquareRug(5, False)
square_rug_2 = SquareRug(2.5, True)
square_rug_1_cost = square_rug_1.cost()
square_rug_2_cost = square_rug_2.cost()
print(f"Rug 1 costs ${square_rug_1_cost:.2f}")
print(f"Rug 2 costs ${square_rug_2_cost:.2f}")</code></pre>
</div>
</div>
<div class="paragraph">
<p>Which gives the same output as the similar version of the functions program.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Rug 1 costs $125.00
Rug 2 costs $46.25</pre>
</div>
</div>
<div class="paragraph">
<p>This is our first class! I think it&#8217;s time to make a commit!</p>
</div>
<div class="paragraph">
<p>Let&#8217;s go through this code and look at the new things we haven&#8217;t used yet. First
we have <code>class SquareRug():</code>. Just like a variable or a function, a class has an
<strong>identifier</strong>, this one is <code>SquareRug</code>. Like variables and functions, the
identifiers within the scope they are declared in all have to be unique. Python
knows we&#8217;re making a class, because we say so with <code>class</code>. Also like a function
the class has a body, which just like a function is demarked with <code>:</code> at the end
of the line and everything below it indented one more level. We&#8217;ll cover the
pair of parens in the next section.</p>
</div>
<div class="paragraph">
<p>So we&#8217;ve told Python we want a class named <code>SquareRug</code>. We now need to tell it
what a square rug is all about. We do that in the body by defining two
functions. Because these functions are in a class body, we call them
<strong>methods</strong>. The first method is a special method, as you might tell by reading
its name. <code><em>init</em></code> is a special method name that Python will use as the
constructor for the class. A <strong>constructor</strong> is a special method that will be
called every time we build a new instance of a class, and it is responsible for
ensuring all the properties of the class are set up properly.</p>
</div>
<div class="paragraph">
<p>This <code><em>init</em></code> function is declared using <code>def</code>, just like all our other
functions, except at one level of indentation because it&#8217;s part of a class. The
function then takes three arguments, <code>self, size, has_fringe</code>. <code>size</code> and
<code>has_fringe</code> make sense, because these are what we expect the class needs for
its data, but what is <code>self</code>?</p>
</div>
<div class="paragraph">
<p>In Python, every method has a necessary first argument which will refer to the
instance of the class that the method is invoked on. What that means is that
when you have an object, and you go to call one of its methods, python will
fill in the first argumemt with the value of the object. This must be marked
down explicitly inside the method, and while it&#8217;s just a variable, by convention
we always name it <code>self</code>.</p>
</div>
<div class="paragraph">
<p>So in the constructor, named <code><em>init</em></code>, we have take three arguments. <code>self</code>
refers to the object we are setting up. <code>size</code> and <code>has_fringe</code> come from
whatever code asked for a new <code>SquareRug</code>. The body of the <code><em>init</em></code>
constructor takes the arguments, and just stores them as properties on <code>self</code>.</p>
</div>
<div class="paragraph">
<p>Just like we can read properties in the calendar program of datetime, so too can
we write to properties. We just use the variable name of the object, put a <code>.</code>,
put the identifier of the property, and use = to assign it like any other
variable we&#8217;ve used thus far.</p>
</div>
<div class="paragraph">
<p>The second method we have, <code>cost</code>, should look pretty familiar. The only change
is that instead of taking <code>size</code> and <code>fringe</code> directly, it instead takes <code>self</code>
and looks up <code>size</code> and <code>has_fringe</code> as properties on the instance.</p>
</div>
<div class="paragraph">
<p>Outside the class we have our little bit of test code. We create two square rugs
by using the class name as if it were a function, and passing all the arguments
<strong>except</strong> <code>self</code>, the first. Python handles filling in the first <code>self</code> argument
on the calling side; it only needs to be explicit inside the method. We create
two rugs passing <code>5, False</code> and <code>2.5, True</code> for the parameters. We call the
<code>cost</code> methods on each instance, and print out the final value.</p>
</div>
<div class="paragraph">
<p>We can do this again for the rectangle rug.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">class RectangularRug():
    def __init__(self, width, length, has_fringe):
        self.width = width
        self.length = length
        self.has_fringe = has_fringe

    def cost(self):
        area = self.width * self.length
        cost = area * 5
        if (self.has_fringe):
            perimeter = self.width * 2 + self.length * 2
            cost = cost + perimeter * 1.5
        return cost

rectangle_rug_1 = RectangularRug(4, 6, False)
rectangle_rug_2 = RectangularRug(2.5, 5, True)
rectangle_rug_1_cost = rectangle_rug_1.cost()
rectangle_rug_2_cost = rectangle_rug_2.cost()
print(f"Rug 1 costs ${rectangle_rug_1_cost:.2f}")
print(f"Rug 2 costs ${rectangle_rug_2_cost:.2f}")</code></pre>
</div>
</div>
<div class="paragraph">
<p>With these test cases, we get</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Rug 1 costs $120.00
Rug 2 costs $85.00</pre>
</div>
</div>
<div class="paragraph">
<p>This should look and feel pretty similar. We define the new class,
<code>RectangularRug</code>. Its constructor takes four arguments, instead of three. The
cost calculation is a little different. But otherwise, it&#8217;s all still there!</p>
</div>
<div class="paragraph">
<p>Take a few minute to write the last rug class, <code>CircularRug</code>. Using <code>5, False</code>
and <code>2.5, True</code> you should again get</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Rug 1 costs $392.70
Rug 2 costs $121.74</pre>
</div>
</div>
<div class="paragraph">
<p>Let&#8217;s remove all the testing code and take a look at how we might ask for user
input for each of these rugs. Naively, it&#8217;ll be just like what we had in the
functions exercises - ask the user for which type of rug, then ask them all the
numbers for that type, and then finally create that rug and print its cost.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">def price_rug():
    print("1) Square Rug")
    print("2) Rectangular Rug")
    print("3) Circular Rug")
    rug_type = input("Which type of rug? ")
    if rug_type == "1":
        size = float(input("Size of rug: "))
        wants_fringe = input("Has fringe (y/n): "))
        rug = SquareRug(size, wants_fringe == 'y')
    # ... three other types

    rug_cost = rug.cost()
    print(f"The rug costs ${rug_cost:.2f}")

while input("Price another rug? (y/n) ").lower() == 'y':
    price_rug()</code></pre>
</div>
</div>
<div class="paragraph">
<p>We now have a control loop and a few classes, so this might be a good time to
make a commit. (If you&#8217;ve been making them more often, that&#8217;s great!)</p>
</div>
<div class="paragraph">
<p>Right away we see that maybe this isn&#8217;t the best approach. The whole point of
classes was to contain the information necessary to build a rug, but we have
this whole function which just asks all the information over again anyway! Let&#8217;s
fix this by moving the code to get the various rug information to inside the
classes themselves. We&#8217;ll still be able to creat a rug of a certain shape and
size, but now we&#8217;ll have a second option to tell the rug to ask for input on
its own, simplifying the main loop of our program.</p>
</div>
<div class="paragraph">
<p>In the SquareRug class, we need to change the constructor to have default values
for its arguments, and we need to add a get_values method which asks for input
and stores it in the class' properties.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">class SquareRug():
    def __init__(self, size = 0, has_fringe = False):
        self.has_fringe = has_fringe
        self.size = size

    # The old cost function, it doesn't change

    def get_values(self):
        wants_fringe = input("Should this rug have fringe (y/N)? ")
        if wants_fringe.lower().startswith('y'):
            self.has_fringe = True
        self.size = float(input("Side length of this square rug? "))</code></pre>
</div>
</div>
<div class="paragraph">
<p>And do the same thing for the other two classes. Now we can rewrite the control
loop, delegating to this new get_values function!</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">def get_rug():
    print("1) Square Rug")
    print("2) Rectangular Rug")
    print("3) Circular Rug")
    rug_type = input("Which type of rug? ")
    if rug_type == "1":
        return SquareRug()
    elif rug_type == "2":
        return RectangularRug()
    elif rug_type == "3":
        return CircularRug()

def print_rug(rug)
    price = rug.cost()
    if rug.has_fringe:
        with_fringe = "with"
    else:
        with_fringe = "without"
    print(f"This rug costs ${price:.2f} {with_fringe} fringe.")

while input("Price another rug? (y/n) ").lower() == 'y':
    rug = get_rug()
    # Ask for inputs
    rug.get_values()

    print_rug(rug)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now the <code>get_rug</code> function only needs to know about the types of rugs we have in
the program, and chooses one of them. It returns a new instance of the chosen
rug type. Then back in the loop, it has the rug itself ask the user for
the values, which fills in the rug. The control loop sends that rug to this new
<code>print_rug</code> function, to get nice formatting. Now, we have a clean, clear,
logical separation of concerns for our rug types!</p>
</div>
<div class="paragraph">
<p>This feels like a great time to make a commit. You might also at this point want
to compare this version of the program to the prior commit, and look back over
what you&#8217;ve changed!</p>
</div>
<div class="sect3">
<h4 id="_inheritance">Inheritance</h4>
<div class="paragraph">
<p>You may have noticed some duplication starting to crop up across these classes.
Each class has almost the same implementation of the <code>cost</code> method, and each
one has to duplicate <code>get_values</code> asking for whether the rug has fringe.</p>
</div>
<div class="paragraph">
<p>As you might have guessed, we have tools to handle this type of complexity! When
several classes need to share the same functionality, we can introduce a
<strong>base class</strong> to handle the shared pieces, and then each of the classes we
have becomes a <strong>derived class</strong> which fills in just the pieces it cares about.</p>
</div>
<div class="paragraph">
<p>This sounds a little more complicated than it is, so let&#8217;s walk through what we
will do to get this separation before we look at it in practice. What we&#8217;re
going to do is create a new class, <code>Rug</code>. <code>Rug</code> will do all the things our other
rugs can do, but it&#8217;s not going to have any logic that&#8217;s specific to a rug
shape. It will have a constructor, which will only take whether it has a frince
(which applies to all rugs). It will have a method that calculates cost, and one
that asks for <code>get_values</code> that asks whether the user wants fringe. But instead
of doing the calculation for an area and a perimeter, it will instead have a new
pair of methods <code>area</code> and <code>perimeter</code> to extract those calculations out. All
together, our base <code>Rug</code> class looks like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">class Rug():
    def __init__(self, has_fringe = False):
        self.has_fringe = has_fringe

    def get_values(self):
        wants_fringe = input("Should this rug have fringe (y/N)? ")
        if wants_fringe.lower().startswith('y'):
            self.has_fringe = True

    def area(self):
        return 0

    def perimeter(self):
        return 0

    def cost(self):
        area_cost = self.area() * 5
        if self.has_fringe:
            perimeter_cost = self.perimeter() * 1.5
        else:
            perimeter_cost = 0
        total_cost = area_cost + perimeter_cost
        return total_cost</code></pre>
</div>
</div>
<div class="paragraph">
<p>We can&#8217;t really run this yet, because any time we create a <code>Rug</code> its cost will
always come out as <code>0</code>. Instead, we need to tell Python that <code>SquareRug</code> and the
rest want to <strong>derive</strong> or <strong>inherit</strong> from this class' definition. What that
means is that any class we have derived will have access to these functions and
behaviors, but more importantly, it is able to replace the definitions as
needed! It also can use all the properties the parent class (the one it derives
from) has, as well as being able to declare new properties specific to it.</p>
</div>
<div class="paragraph">
<p>In practice, this means that our <code>SquareRug</code> class will need to add properties
for its size, and provide new definitions for the <code>area</code> and <code>perimeter</code>
methods. I&#8217;ll give the example of <code>SquareRug</code>, and you can do the same for
<code>RectangularRug</code> and <code>CircularRug</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">class SquareRug(Rug):
    # __init__ and stays the same and is unchanged

    # remove the cost method

    # change the get_values method
    def get_values(self):
        self.size = float(input("Side length of this square rug? "))

    # add these methods
    def area(self):
        return self.size ** 2

    def perimeter(self):
        return self.size * 4</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here, we still have our class identifier, but we added the <code>Rug</code> parent class to
the inside of the first parenthesis. This is what tells python this is a derived
class. The <code>get_values</code> method asks for the side of the rug, and the <code>area</code> and
<code>perimeter</code> methods do just the specific calculations for the square.</p>
</div>
<div class="paragraph">
<p>If we execute our program now and choose a square rug, the <code>get_rug</code> function
will create a new <code>SquareRug</code> object. Then, when we call <code>cost</code> in <code>print_rug</code>,
it will look on the <code>SquareRug</code> for a <code>cost</code> method. Because there is no <code>cost</code>
method defined on <code>SqaureRug</code>, it will look on the super class, <code>Rug</code>. <code>Rug</code>
does have a <code>cost</code> method, so Python will execute that method using the instance
of the <code>SquareRug</code> as the <code>self</code> argument. As <code>Rug::cost</code> executes, it will ask
for the <code>area</code> method on the <code>SquareRug</code> instance. <code>SquareRug</code> <strong>does</strong> define an
<code>area</code> method, so Python will use that version which returns the size squared.</p>
</div>
<div class="paragraph">
<p>Update the Rectangular and Circular rugs to use the base class functionality!</p>
</div>
<div class="paragraph">
<p>When you&#8217;re done, make a commit! This should be much cleaner, and would be
another great time to review the differences from the last check point.</p>
</div>
<div class="sect4">
<h5 id="_accessing_base_behavior">Accessing base behavior</h5>
<div class="paragraph">
<p>But wait, this is missing something - how will it get whether the user wants
fringe? Because we replaced the <code>get_values</code> method, this new version will get
called which will only ask for the side length of the rug! What we want in this
case is to call a <strong>super</strong> method. That&#8217;s a fancy way of saying we want to get
the original version of the <code>get_values</code> method, before we changed it, and use
that instead.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">class SquareRug(Rug):
    def __init__(self, size = 0, has_fringe = False):
        Rug.__init__(self, has_fringe)
        self.size = size

    def get_values(self):
        Rug.get_values(self)
        self.size = float(input("Side length of this square rug? "))

    # Other methods stay the same</code></pre>
</div>
</div>
<div class="paragraph">
<p>These two methods first get access to the method on the parent class by
asking for it specifically - <code>Rug.<em>init</em></code> and <code>Rug.get_values</code>. This treats
the method specifically as a function, just like calling any other function.
However, because we&#8217;re accessing the method directly rather than through an
object, we need to provide the <code>self</code> argument explicitly. This all results
in calling the <code>Rug&#8217;s version of `get_values</code> on our rug instance to ask for
and set the <code>has_fringe</code> property, beore doing <code>SquareRug&#8217;s user input for
side length. For completeness and consistency, we do the same thing in the
`<em>init</em></code> constructor - instead of setting <code>has_fringe</code> at this point, we
let the super class constructor handle it. While it&#8217;s a bit silly for this
simple case, it&#8217;s a good habit to get into for when the base class has more
complex initialization behavior.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s look at this for <code>RectangleRug</code>, and then you can do it yourself for
<code>CircleRug</code>!</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">class RectangularRug(Rug):
    def __init__(self, length = 0, width = 0, has_fringe = False):
        Rug.__init__(has_fringe)
        self.length = length
        self.width = width

    def get_values(self):
        Rug.get_values()
        self.length = float(input("Length of this rectangular rug? "))
        self.width = float(input("Width of this rectangular rug? "))

    def area(self):
        return self.width * 2 + self.length * 2

    def perimeter(self):
        return (self.width + self.length) * 2</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now this is looking like it&#8217;s saving us some code! Our control loop and
functions for choosing and printing a rug are still working, because we didn&#8217;t
change how any of the types of properties or methods on the object! We only
changed the implementations of the methods themselves. This process, taking an
existing program and rewriting parts of it to be more legible or efficient, is
called <strong>refactoring</strong>. We will do it many more times!</p>
</div>
<div class="paragraph">
<p>There&#8217;s one more refactoring I&#8217;d like to do in this program before we move on
to the next section. There&#8217;s no reason the rugs can&#8217;t print out themselves. They
already ask for input, and if we have them print their own output, we can easily
say what type the rug is!</p>
</div>
<div class="paragraph">
<p>We&#8217;ll do this in two parts. First, we&#8217;ll add a method <code>print</code> with no arguments
to the base <code>Rug</code> class. Then we&#8217;ll add a property <code>description</code> to each rug
class.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">class Rug():
    def __init__(self, has_fringe = False, description = ""):
        self.has_fringe = has_fringe
        self.description = description

    # ... The other methods, unchanged

    def print(self):
        price = self.cost()
        if self.has_fringe:
            with_fringe = "with"
        else:
            with_fringe = "without"
        description = self.description
        print(f"This {description} rug costs ${price:.2f} {with_fringe} fringe.")

class SquareRug(Rug):
    def __init__(self, size = 0, has_fringe = False):
        Rug.__init__(self, has_fringe, "square")
        self.size = size

    # Other methods</code></pre>
</div>
</div>
<div class="paragraph">
<p>I think you get the point, and can handle <code>RectangularRug</code> and <code>CircularRug</code> on
your own!</p>
</div>
<div class="paragraph">
<p>Now that <code>print</code> is in the parent rug, we can remove our entire <code>print_rug</code>
function. Then, we need to replace the call in <code>price_rug</code> with a call to
<code>rug.print()</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">def price_rug():
    rug = get_rug()
    rug.get_values()
    rug.print()</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here&#8217;s a sample session:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Price another rug (Y/n): Y
1) Square Rug
2) Rectangular Rug
3) Circular Rug
Which type of rug? 1
Should this rug have fringe (y/N)? N
Side length of this square rug? 5
This square rug costs $125.00 without fringe.
Price another rug (Y/n): Y
1) Square Rug
2) Rectangular Rug
3) Circular Rug
Which type of rug? 3
Should this rug have fringe (y/N)? y
Radius of this circular rug? 5
This circular rug costs $439.82 with fringe.
Price another rug (Y/n): n
Goodbye!</pre>
</div>
</div>
<div class="paragraph">
<p>When you&#8217;re done with all three, let&#8217;s make our final commit and compare it to
our first version with the original control loop. Quite a change, hun?</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_exercises_9">Exercises</h4>
<div class="ulist">
<ul>
<li>
<p>Change the price per square foot and the price per perimeter.</p>
</li>
<li>
<p>Refactor <code>SquareRug</code> to extend from <code>RectangularRug</code> instead of <code>Rug</code>. The
user interface (the visible text the user sees and inputs the user gives)
should not change.</p>
</li>
<li>
<p>Allow the user to specify the color of each rug. Colors do not change the
price of a rug.</p>
</li>
<li>
<p>Incredi-Rugz has added a new type of rug, the Peackock rug. This rug comes
in small, medium, and large sizes; it never has fringe; and it only comes in
one color, "Peacock". Small peacock rugs cost $125; medium cost $250, and
large cost $500.</p>
</li>
<li>
<p>The rugs program currently asks for several rugs, prices each, and then
exists. Write a new class, <code>Order</code>. Move your control loop into <code>Order</code>,
which should:</p>
</li>
<li>
<p>Ask for the name of who&#8217;s making the order</p>
</li>
<li>
<p>Repeatedly ask whether the user wants to add a rug to the order</p>
</li>
<li>
<p>If the users wants to add a rug to the order, use the same prompts to
create and describe the rugs.</p>
</li>
<li>
<p>When the user is done asking for rugs, print out the order including who
is placing the order, a summary of each rug with type, size, color, and
price, and a total cost for all the rugs in the order.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In this section, we&#8217;ve looked at how we define and create our own classes.
Classes describe objects, bundles of data with certain properties and methods
that work hand-in-hand. We rewrote our Rugs programs, and saw how using classes
and objects let us finally have much less duplication and much clearer flow of
operations &amp; data. Taken together, objects allow us to abstract data in the same
way functions allow us to abstract operations and code execution.</p>
</div>
</div>
<div class="sect3">
<h4 id="_exercises_10">Exercises</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Recipe Book</strong> Create classes for your recipes program in chapter 1. At a
minimum, you should have classes for <code>Recipe`s and `Ingredient`s. Both
should have a `print_for_desired_servings</code> method, which takes the number of
people to cook the recipe for, and prints the scaled ingredients for that
many servings.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p><strong>Measurements</strong> Write a class hierarchy (base class and sub classes) for
ingredient measurements. Ingredients should take a name and a
measurement. Measurements should take an amount. When you write method
to scale the measurement to fit the serving, it should return a suitable
string. For instance, convert 1/8 cup to 2 tablespoons; or 1 tablespoon
and 1 teaspoon to 4 teaspoons.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Now that we know the basics of programming with objects, we can look at
tracing objects in memory.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_maze_design_with_classes">Maze Design with Classes</h3>
<div class="paragraph">
<p>As we discussed in the textbook, we&#8217;re going to build a program that lets us
control a character moving through a maze. We will represent this using a
variety of classes which interact. The roooms themselves will be instances of a
<code>Room</code> class, which will have doors to the north, south, west, and east. (In a
later exercise, we&#8217;ll change the room to have an unlimited number of doors.) A
door, similarly, will be an instance of a <code>Door</code> class. Unlike the room, it will
have an ever fixed number of sides. A door can only connect two specific rooms,
never more, never less.</p>
</div>
<div class="paragraph">
<p>So for properties, a room will need a door in each cardinal direction. However,
not every cardinal direction will have a door. We represent this case with the
special value <code>None</code>. <code>None</code> in Python is used as a value wherever you need to
indicate a missing object. So it&#8217;s for a variable or property that we would
expect to have a value that&#8217;s an object type, but instead it isn&#8217;t present. We
then can look for when a value is <code>None</code>, and behave accordingly - in this case,
by saying there&#8217;s not a door in the north or west walls.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s start writing out this code. I&#8217;m going to do this for the base features as
well as the north door. You will need to fill in the east, south, and west doors
in your own <code>maze.py</code> file.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">class Room():
    def __init__(self, description, key = None):
        self.description = description
        self.key = key
        self.north_door = None

    def add_north_door(self, north_room, lock = None):
        self.north_door = Door(self, north_room, lock)
        north_room.south_door = self.north_door

class Door():
    def __init__(self, side_a, side_b, lock = None):
        self.side_a = side_a
        self.side_b = side_b
        self.lock = lock

    def other_side(self, side):
        if side == self.side_a:
            return self.side_b
        else:
            return self.side_a

entry_room = Room("the entrance")
exit_room = Room("the exit")
entry_room.add_north_door(exit_room)

print(exit_room.south_door.other_side(exit_room).description)</code></pre>
</div>
</div>
<div class="paragraph">
<p>When you run this code, it should print out <code>Entrance</code>, which is the room on the
other side of the south door from the exit room. The last line of code looks a
bit onerous right now, but we&#8217;ll be replacing it with something more sensible in
a moment.</p>
</div>
<div class="paragraph">
<p>Disecting the code we just wrote, we have two classes, one each for <code>Room</code> and
<code>Door</code>. Neither extends another class, so we have nothing in the parens. Both
classes have a <strong>constructor</strong> , which in Python is a method <code><em>init</em></code>. The
room takes a <code>description</code>, a string that describes the room, and <code>key</code>, which
is the key (if any) the room has. We use the default value <code>None</code> because we
expect it&#8217;s more common for a room not to have a key. The room needs the two
sides, and also a lock. It has <code>None</code> as a default value for the same reason as
the <code>key</code> in the <code>Room</code>.</p>
</div>
<div class="paragraph">
<p>Both classes take their constructor arguments and put those values into
properties on the objects that the class constructor created.</p>
</div>
<div class="paragraph">
<p><code>Room</code> has a method to add a door connecting a room to the north. Rather than
requiring the program to create the door and then attach it themselves, which
would be three steps for the programmer, we&#8217;ll instead have a single method for
each door direction will will handle creating the door, and attaching it to both
rooms. This type of <strong>object creation</strong> is common because it reduces the number
of things necessary to remember to do to create a correct object.</p>
</div>
<div class="sect3">
<h4 id="_locks_and_keys_and_keyrings">Locks and Keys and Keyrings</h4>
<div class="paragraph">
<p>In the next section of the code, we need to look at how the locks and keys fit
together. We&#8217;re actually going to make two classes here - one to represent the
locks themselves, and the second to represent a keyring as a whole. Later in the
program, we&#8217;ll give the player a keyring and use that to check whether some
doors can or cannot be traveresed.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">class Lock():
    def __init__(self, fitting_key = None):
        self.fitting_key = fitting_key

    def accepts(self, key):
        return key == self.fitting_key

class Keyring():
    def __init__(self):
        self.keys = []

    def add_key(self, key):
        if not key in self.keys:
            print(f"Picked up {key} key")
            self.keys.append(key)

    def can_unlock(self, door):
        if door.lock == None:
            return True
        for key in self.keys:
            if door.lock.accepts(key):
                return True
        return False

entry_room = Room("entrance")
exit_room = Room("exit")
blue_lock = Lock("blue")
entry_room.add_north_door(exit_room, blue_lock)
keyring = Keyring()

print(keyring.can_unlock(entry_room.north_door))
keyring.add_key("blue")
print(keyring.can_unlock(entry_room.north_door))</code></pre>
</div>
</div>
<div class="paragraph">
<p>A lock keeps track of which key fits it, and provides a simple method to check
whether it accepts a certain key. Having this as a separate method allows more
flexibility down the line - while today we have locks which take a single key,
we could think of ways to extend the <code>Lock</code> class to require one of several keys
(like a specific key and a master key), or make it need multiple keys to unlock.</p>
</div>
<div class="paragraph">
<p>The keyring tracks which keys have been found, and for any given door, it asks
the lock on the door if any of its keys fit. If they do, the <code>can_unlock</code>
method returns <code>True</code> and we know this <code>Keyring</code> lets us through that door.</p>
</div>
</div>
<div class="sect3">
<h4 id="_game_and_player">Game and Player</h4>
<div class="paragraph">
<p>The last two pieces before our game works are a <code>Player</code> and a <code>Game</code>. <code>Player</code>
tracks where the player currently is in the maze, keeps a <code>Keyring</code> to unlock
doors, and a method <code>move_through</code> to check if the door is open and then update
which room the player is in.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">class Player():
    def __init__(self, start_room):
        self.keyring = Keyring()
        self.current_room = start_room

    def move_through(self, door):
        if door != None and self.keyring.can_unlock(door):
            self.current_room = door.other_side(self.current_room)
            self.current_room.on_enter(self)
        else:
            print("Cannot move through that door.")</code></pre>
</div>
</div>
<div class="paragraph">
<p>The player starts itself in some given room, and makes itself an empty keyring.
The <code>move_through</code> method takes a door that the player should attempt to go
through. If the door doesn&#8217;t exist (is <code>None</code>, or a missing object), or if the
keyring dosn&#8217;t unlock the door, nothing happens. If the door is present and can
be unlocked by the keyring, the player does move through the door. It updates
the current room to be whichever room is on the other side of the door from
where they started. The last line is a call to a method we haven&#8217;t seen yet -
<code>on_enter</code>.</p>
</div>
<div class="paragraph">
<p>The idea here is that, when a player enters a room, the room has an opportunity
to tell the player object anything that it needs to know. In this case, we&#8217;re
going to let the room tell the player about the key it has. Let&#8217;s add this
method to the room class.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">class Room():
    # ...

    def on_enter(self, player):
        if self.key != None:
            player.keyring.add_key(self.key)</code></pre>
</div>
</div>
<div class="paragraph">
<p>This type of programming is called <strong>inversion of control</strong> which is just a
fancy way to say one object passing itself to another object to let the other
object decide what to call and which properties to change on the first.</p>
</div>
<div class="paragraph">
<p>Our final class will be the <code>Game</code>, which wraps all the rooms and players up and
handles user input and output. Let&#8217;s type it in, and then we&#8217;ll review it. Just
like the first <code>Room</code> class, this code includes the north door. You will need to
do the other four directions.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">class Game():
    def __init__(self, start_room, end_room):
        self.player = Player(start_room)
        self.end_room = end_room

    def print_room(self):
        room = self.player.current_room
        print(f"You are in {room.description}.")
        if room.north_door != None:
            print("There is a door to the (n)orth.")

    def move_player(self, direction):
        room = self.player.current_room
        if direction == "n" and room.north_door != None:
            self.player.move_through(room.north_door)
        else:
            print("No room in that direction.")

    def play(self):
        while True:
            self.print_room()

            direction = input("Which direction do you go? (q to quit) ")[0].lower()
            if direction == "q":
                break

            self.move_player(direction)

            if self.player.current_room == self.end_room:
                print("You won the treasure!")
                break</code></pre>
</div>
</div>
<div class="paragraph">
<p>A <code>Game</code> needs the starting and ending room of the maze. Instead of storing the
<code>start_room</code>, it instead creates a new <code>Player</code> which starts in the
<code>start_room</code>. The <code>Game</code> does store the <code>end_room</code>, to check during the <code>play</code>
method when the player has won.</p>
</div>
<div class="paragraph">
<p>The bulk of <code>Game</code> is in <code>play</code>. Like the HiLo game or the rug calculator, a
<code>while True:</code> loop keeps repeating the game steps over and over. The steps are
intended to be concise, using the helper methods for the working aspects. The
<code>Game</code> prints out the room the player is currently in. It asks which way the
user wants to go. If the user decides to quit, the loop exists. Otherwise, have
the player move in the input direction. After they have moved, check if they
won - and if so, congratulate them and exit! If they&#8217;re not at the exit yet,
loop back and play some more!</p>
</div>
<div class="paragraph">
<p>Let&#8217;s try it out on a bigger maze:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">room_a = Room("the entry room")
room_b = Room("the library", "blue")
room_c = Room("the dining room")
room_d = Room("the kitchen")

room_a.add_east_door(room_b)
room_a.add_north_door(room_c)
room_c.add_north_door(room_d, Lock("blue"))

game = Game(room_a, room_d)
game.play()</code></pre>
</div>
</div>
<div class="paragraph">
<p>This last block builds out a full game! We have four rooms, a locked door, and
start the player in the entry. Give it a shot!</p>
</div>
</div>
<div class="sect3">
<h4 id="_exercises_11">Exercises</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Make a bigger maze!</p>
</li>
<li>
<p>Add more items or types of keys?</p>
</li>
<li>
<p>Provide descriptions of doors.</p>
</li>
<li>
<p>Make rooms support as many doors as you want to give them.</p>
</li>
</ol>
</div>
<div class="sect4">
<h5 id="_recipe_book">Recipe book</h5>
<div class="paragraph">
<p>Write a program that shows a recipe book. This recipe book will let users choose
a recipe from a list of recipes, and then when the user is reading a recipe, let
them change the number of servings. When the user changes the number of servings
it will update all the measurements as needed. A recipe book has a title and
many recipes. Each recipe has a title, a number of servings in its written
instructoins, a list of ingredients, and instructions as a string or list of
directions. Ingredients in a recipe will need a name, and also some notion of a
measurement.</p>
</div>
<div class="paragraph">
<p>Measurements will be where a lot of the magic in scaling the number of servings.
A measurement could be as simple as a single number, which scales up and down
based on the desired number of servings. A measurement will be some base number,
but will also need some notion of whether it&#8217;s a volume or a weight or a count
of things.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_unit_testing">Unit Testing</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_python_unittest">Python unittest</h3>
<div class="paragraph">
<p>Like <code>datetime</code> for working with dates and times, Python includes a standard
library for writing unit tests. It&#8217;s imaginitively called <code>unittest</code>. <code>unittest</code>
exports a few utilities, but the main feature is a base class <code>TestCase</code>. Each
test case we write will be a class that extends <code>TestCase</code>. These test case
classes will use methods for each test case they want to execute. We&#8217;ll write a
test case class for each rug type, and within them write a test method for each
of the edge cases we want to cover.</p>
</div>
<div class="paragraph">
<p>We&#8217;ll write our first test in just a moment, but we do need to do a tiny bit of
clean up and preparation. First, we want to write our test file in the same
folder as the <code>rugs.py</code> program from chapter 3. We can either create
<code>rugs_test.py</code> in the same folder as <code>rugs.py</code> lives now, or we can create a new
folder, copy <code>rugs.py</code> there, and then create <code>rugs_test.py</code>. Whichever way you
do it, we need to fix <code>rugs.py</code> a tiny little bit to make it work as a library.</p>
</div>
<div class="paragraph">
<p>Right now, <code>rugs.py</code> is a <strong>script</strong>, because it executes as a single file and
immediately runs commands to start taking user input. While we want this
behavior when we run the program, the unit test doesn&#8217;t have user behavior. It
just wants the class definitions from the file. But if we <code>import</code> the file
right now, Python will find the class definitions, and then right away start
asking whether the user wants to price a rug.</p>
</div>
<div class="paragraph">
<p>What we&#8217;re going to do is put the last two lines (the <code>while</code> loop) in a
function, and then add a couple lines of Python which will only execute that
function when we run the file directly, as opposed to when it gets included as a
library in another program.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">def price_rugs():
    while not input("Price another rug (Y/n): ").lower().startswith("n"):
        price_rug()

if __name__ == "__main__":
    price_rugs()</code></pre>
</div>
</div>
<div class="paragraph">
<p>This last part, <code>if <em>name</em> == "<em>main</em>":</code> takes advantage of a Python feature
that lets us know if the file we&#8217;re in is the file that we ran specifically,
rather than a file which was included by another file. <code><em>name</em></code> is a special
variable in Python, and when it has the value <code>"<em>main</em>"</code>, we know that the
user wanted to run this file, rather than importing it.</p>
</div>
<div class="paragraph">
<p>Now we can write our first test case! Again, in <code>rugs_test.py</code>, add this code
and run it!</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">import unittest
import rugs


class SquareRugTestCase(unittest.TestCase):
    def test_no_fringe(self):
        rug = rugs.SquareRug(5, False)

        area = rug.area()
        cost = rug.cost()

        self.assertEqual(area, 25)
        self.assertEqual(cost, 125)


if __name__ == "__main__":
    unittest.main()</code></pre>
</div>
</div>
<div class="paragraph">
<p>When we run it, <code>unittest</code> has some great output for us:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>.
----------------------------------------------------------------------
Ran 1 test in 1.236s

OK</pre>
</div>
</div>
<div class="paragraph">
<p>This says that it took about a second to run one test, and all the tests pass!</p>
</div>
<div class="paragraph">
<p>The code to create the test starts by importing <code>unittest</code>, which we&#8217;ll use to
coordinate and organize the tests, and <code>rugs</code>, which is the name of the file
which has our <code>Rug</code> classes. The test suite is <code>SquareRugTestCase</code>, which
extends the <code>unittest.TestCase</code> utilities. These are responsible for triggering
and gathering results, and reporting the final results at the end of the run.
<code>SquareRugtestCase</code> has no constructor (<code><em>init</em></code> method) because it doesn&#8217;t
need to set up any contructors or do any initialization.</p>
</div>
<div class="paragraph">
<p>The first test, <code>test_no_fringe</code>, makes a square rug. It uses the values <code>5</code> and
<code>False</code> for size and fringe. With the test set up, it moves on to evaluating the
calculations. It saves <code>area</code>, <code>perimeter</code>, and <code>cost</code> in local variables.
Finally, the assert uses the provided helper classes to check if the values are
what we expect. <code>self.assertEquals(cost, 125)</code> compares the two values, and if
they are not exactly equal, print and record the failing test.</p>
</div>
<div class="paragraph">
<p>To see a failing test, try changing one of the constants, and see what happens!
Here&#8217;s an example of mine:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>F
======================================================================
FAIL: test_no_fringe (__main__.SquareRugTest)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "01_rug_tests\rug_test.py", line 14, in test_no_fringe
    self.assertEqual(perimeter, 25)
AssertionError: 20 != 25

----------------------------------------------------------------------
Ran 1 tests in 0.004s</pre>
</div>
</div>
<div class="paragraph">
<p>So I changed the perimeter check to be 25, which is not the correct value. I can
read this error message and see specifically the line that was at issue, and the
problems associated. In appendix 3, we look in depth at reading and using
exceptions to debug our programs.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s add another two tests!</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">class SquareRugTestCase(unittest.TestCase):
    def test_square_rug_no_fringe(self):
        # ... the test from before

    def test_square_rug_fringe(self):
        rug = rugs.SquareRug(5, True)

        area = rug.area()
        perimeter = rug.perimeter()
        cost = rug.cost()

        self.assertEqual(area, 25)
        self.assertEqual(cost, 155)

    def test_square_rug_no_size(self):
        rug = rugs.SquareRug(0, False)

        area = rug.area()
        perimeter = rug.perimeter()
        cost = rug.cost()

        self.assertEqual(area, 0)
        self.assertEqual(perimeter, 0)
        self.assertEqual(cost, 0)</code></pre>
</div>
</div>
<div class="paragraph">
<p>And running this, it says we have three tests, <code>OK</code>!</p>
</div>
<div class="paragraph">
<p>These tests probably don&#8217;t seem like a lot, but they give us quite a bit of
easily verifiable information. While it looks like a long amount of code (and,
it is&#8230;&#8203;) the code is clear and direct in what it&#8217;s doing. There&#8217;s no logic,
only direct calls and direct comparisons. While we&#8217;ve tried to be concise and
tight in our main program, being able to simply read the tests is a great boon.</p>
</div>
<div class="sect3">
<h4 id="_writing_your_own_tests">Writing your own tests</h4>
<div class="paragraph">
<p>As you go to write your own unit tests, we need a way to take what we&#8217;ve done
for rugs and apply it generally. The first thing we want to do is create a test
file for every program file we create. In the rugs program, we had <code>rugs.py</code> and
put the test in <code>rugs_test.py</code>. This convention, of creating a second file and
adding <code>\_test</code> to it, is a great way to organize your project. It is clear what
your program files are, and what the tests are.</p>
</div>
<div class="paragraph">
<p>The second thing to do is to make sure our program has no behavior when it&#8217;s
first called. That is, Python can run the file and find all the functions and
classes and variables, but it won&#8217;t execute any code right away. It needs to
wait until it&#8217;s told explicitly to run in a test or another file. But many of
our programs do need to do something if we run them specifically! To achieve
this, at the end of our python files we check if we&#8217;re running the "main" file
that was specified on the command line.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>if __name__ == "__main__":
    # Run the program if it was called directly</pre>
</div>
</div>
<div class="paragraph">
<p>Because we should be testing all our programs, any python file we write that does
more than declare classes and functions should end with this block of code.</p>
</div>
<div class="paragraph">
<p>Third, we can import the pieces of our program into our test. Because the test
file lives in the same folder as the program, we can just use the file name
(without the .py extension) in the <code>from</code> part of our import. There are two ways
we can import our implementation. Using the rugs example, we could use either
of these forms:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>import rugs

squareRug = rugs.SquareRug()
rectRug = rugs.RectangularRug()</pre>
</div>
</div>
<div class="paragraph">
<p>This form imports the file as an object, where the properties are all the
functions and classes at the top level of the <code>rugs.py</code> file. Alternatively,
you can import each item in isolation. This is useful if you only need one or
two items from the file.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>from rugs import SquareRug
from rugs import RectangularRug

squareRug = SquareRug()
rectRug = RectangularRug()</pre>
</div>
</div>
<div class="paragraph">
<p>We have used this form before when we only wanted one or two things out of a
much larger module, like when we did <code>from math import sqrt</code>. While we&#8217;re doing
imports, we also want to import TestCase from the unittest module which Python
provides.</p>
</div>
<div class="paragraph">
<p>After importing the parts of our program we intend to test, we can fourthly start
creating TestCases. A TestCase does two things - it groups together tests for
related pieces of functionality, and it extends from the Python TestCase
base class to get a bunch of "magic" that will actually execute the tests when
you run the test file.</p>
</div>
<div class="paragraph">
<p>To get that magic, we need to create a class structured in a very specific
way. First, it must extend from unittest.TestCase. Second, it must have methods
whose name begins with <code>test</code>. Python looks at classes which extend TestCase
for any method that starts with <code>test</code>, and treats those as the specific tests
to run and, whether they pass or fail, will report them with that name.</p>
</div>
<div class="paragraph">
<p>We can look at the Rugs tests for an example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">import unittest
import rugs

class RectangularRugsTest(TestCase):
    def test_rectangle_fringe(self):
        # The body of the test</code></pre>
</div>
</div>
<div class="paragraph">
<p>When you create tests for your own projects, it&#8217;s usually a good idea to have
one test file per program file, and one test case in the test file per class
or function in the program file. Each TestCase then has multiple tests methods
to verify each part of functionality that it has. A simple function might have
just a single test method, while a complex class could have dozens or hundreds!</p>
</div>
<div class="paragraph">
<p>Our fifth step in creating a test for our programs is writing out the details
of each possible way to run the function or class. You want to be writing a
test method for the common ways to use it, and you realy want to write a test
method for each of the uncommon ways! For instance, in the rugs, we tested both
with and without fringe. These are common cases. We also tested what happens
if a size is 0! This and other uncommon cases are <strong>edge cases</strong>, and because
they&#8217;re dealing with things a bit wonky or out of the ordinary, we really want
to focus on them in our tests to make sure it behaves just as we thing it should.</p>
</div>
<div class="paragraph">
<p>Within our test methods, there&#8217;s a common approach: set up, execute, assert.
It&#8217;s easiest to look at these in backwards order. Assert is how we will verify
our program is behaving correctly. We know that if it does perform as specified,
our program will be in some certain state. As a very simple example, let&#8217;s say
our program is adding two numbers: <code>a = b + c</code>. After the program has completed
this step, we expect the variable <code>a</code> to have a certain value. And to demonstrate
that, we will <code>assert</code> that it does. We do this with the <code>assert&#8230;&#8203;</code> methods.
In rugs, this was <code>self.assertEqual(rug.cost, 50)</code>. For this example, it would be
<code>self.assertEqual(a, the_value_of_b_plus_c)</code>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
We use the expected value of b + c, instead of calculating it inline!
By manually performing the expected calculation, you save yourself from
accidentally using a value that came from a bug in your code! And yes, most of
the time the computation is much more complex than addition!
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="paragraph">
<p><code>assertEqual</code> is the most common assertion you&#8217;ll do, but others are available
if you check the Python documentation.</p>
</div>
<div class="paragraph">
<p>To assert something about a program state, we must have executed it before.
In the rugs test, that was calling the cost method and storing the result. In our
simple example here, it would just be the one line of code <code>a = b + c</code>. For
this to work, we need some values for <code>b</code> and <code>c</code>, and that&#8217;s the set up part.
All in all, this test would look like so:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># Create a test case
class ArithmeticTests(unittest.TestCase):
  # Declare a test method
  def test_simple_addition(self):
    # Set up
    b = 5
    c = 3

    # Execute
    a = add(b, c)

    # Assert
    self.assertEqual(a, 8)</pre>
</div>
</div>
<div class="paragraph">
<p>There you go! These are all the pieces of defining, creating, and implementing
a unit test for your program. The last piece is to run it. To do that, we&#8217;re
going to tell unittest to run when the test class is executed directly:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>if __name__ == "__main__":
  unittest.main()</pre>
</div>
</div>
<div class="paragraph">
<p>Putting that at the end of your <code>\_test.py</code> file will let you run it with python
on the command line, and it will either tell you all the unit tests passed, or
it will show you an error for exactly which one failed!</p>
</div>
<div class="paragraph">
<p>The whole example again:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">import unittest # Get the testing library

from my_arithmetic import add # Get the thing we wrote and will test

# Create a test case
class ArithmeticTests(unittest.TestCase):
  # Declare a test method
  def test_simple_addition(self):
    # Set up
    b = 5
    c = 3

    # Execute
    a = add(b, c)

    # Assert
    self.assertEqual(a, 8)

# Run the tests when we execute this file
if __name__ == "__main__":
  unittest.main()</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_exercises_12">Exercises</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Write tests for the other rugs types you have.</p>
</li>
<li>
<p>Write tests for recipe ingredient scaling.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_testing_maze">Testing Maze</h3>
<div class="paragraph">
<p>The maze program is much more complex than the rugs. It involves several objects
that interact with one another and apply logic to evaluate and validation those
interactions. For this test, we&#8217;re going to start by thinking through our test
suite before writing our test cases.</p>
</div>
<div class="paragraph">
<p>The maze has several classes, and we&#8217;ll want one test case for each class. The
idea will be to capture all the tests that are specific to a class in its own
test case class, so there&#8217;s a 1:1 correspondance. This doesn&#8217;t mean we can&#8217;t use
other classes in these tests, just that the focus will be on one individual
class at a time.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s start writing this down. Save a new file, <code>maze_test.py</code>. Make sure either
you save it in the same folder as <code>maze.py</code>, or create a new folder and move
<code>maze.py</code> so they&#8217;re adjacent. In this file, start with the bare minimum of a
unit test.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">import unittest
import maze


# Test cases will go here


if __name__ == "__main__":
    unittest.main()</code></pre>
</div>
</div>
<div class="paragraph">
<p>This imports unit test and maze, and if the file is executed directly, will run
the unit tests.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s look at our test cases. We have <code>Room</code>, <code>Door</code>, <code>Lock</code>, <code>Keyring</code>,
<code>Player</code>, and <code>Game</code>. Because <code>Game</code> deals with input and output, we&#8217;ll cover
its tests separately in the next section. Looking at the other five classes, we
should start with classes who have the least dependencies on other classes, and
write the simplest tests for that first.</p>
</div>
<div class="paragraph">
<p><code>Lock</code> has no other classes that it needs for it to work. It just takes keys,
which are strings, and checks if the key is in its list of keys that fit.
Looking at what to test, I see four easily identifiable cases:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Can it add a key that fits at all?</p>
</li>
<li>
<p>Does it handle adding a duplicate key?</p>
</li>
<li>
<p>Will it accept a fitting key?</p>
</li>
<li>
<p>Will it reject a key that doesn&#8217;t fit?</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>We can write all these out as individual test cases. But, I don&#8217;t want to think
about their implementation yet. I want us to take time to think about the test
suite as a whole, before we look at writing individual tests. We can do that in
Python by using the keyword <code>pass</code> as the body of a method - this tells Python
that the method is really here, it just doesn&#8217;t do anything (yet). We&#8217;ve stubbed
it out.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">class LockTestCase(unittest.TestCase):
    def test_add_fitting_key(self):
        pass

    def test_add_duplicate_fitting_key(self):
        pass

    def test_accepts_fitting_key(self):
        pass

    def test_does_not_accept_missing_key(self):
        pass</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here we have our <code>LockTestCase</code> which extends <code>TestCase</code>. It has four <code>test_</code>
methods for each of the four cases. Each of those has the body <code>pass</code> which we
can come back to later to fill in.</p>
</div>
<div class="paragraph">
<p>With the <code>Lock</code> tests sketched out, I think the <code>Keyring</code> makes sense. It&#8217;s very
similar to the <code>Lock</code>, but also needs to understand the difference between doors
that are locked that it has the key for, doors that are locked that it doesn&#8217;t
have the key for, and doors that are simply unlocked.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">class KeyringTestCase(unittest.TestCase):
    def test_add_key(self):
        pass

    def test_add_duplicate_key(self):
        pass

    def test_can_unlock_door_no_lock(self):
        pass

    def test_can_unlock_door_having_key(self):
        pass

    def test_cannot_unlock_door_missing_key(self):
        pass</code></pre>
</div>
</div>
<div class="paragraph">
<p>We started using <code>Door`s in `KeyringTestCase</code>, so we might do their tests next.
Most of the complexity around doors is actually in the lock. It&#8217;s not
particularly useful to test that a constructor did or did not set a property (if
that&#8217;s broken, we&#8217;d find out in other tests). So for the <code>Door</code>, we only need to
test that the <code>other_side</code> function works.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">class DoorTestCase(unittest.TestCase):
    def test_tracks_other_side(self):
        pass</code></pre>
</div>
</div>
<div class="paragraph">
<p>Similar to the door and the lock, we won&#8217;t test that a <code>Room</code> can correctly get
a description. But we do need to test that a <code>Room</code> can add a door in each
direction, that it adds keys to those doors, and that when a player first enters
the room that it uses <code>on_enter</code> appropriately.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">class RoomTestCase(unittest.TestCase):
    def test_add_north_door(self):
        pass

    # Three other directions, for you to stub out

    def test_on_enter_adds_key(self):
        pass</code></pre>
</div>
</div>
<div class="paragraph">
<p>As we said, we&#8217;re leaving the <code>Game</code> tests to the next section, so the only one
we have left is the <code>Player</code>. All the Player logic is around the <code>move_through</code>
method, so we&#8217;ll write a test for each of these cases.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">class PlayerTestCase(unittest.TestCase):
    def test_can_move_through_unlocked_door(self):
        pass

    def test_can_move_through_locked_door_with_key(self):
        pass

    def test_cannot_move_through_locked_door_without_key(self):
        pass

    def test_cannot_move_through_None_door(self):
        pass</code></pre>
</div>
</div>
<div class="paragraph">
<p>Let&#8217;s take a moment to look over these classes. We have tests for each of the
individual pieces of logic. With this level of coverage, we can be pretty
confident that our code will behave as expected, if each of these tests pass.
All we need to do is actually write them!</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">class LockTestCase(unittest.TestCase):
    def test_add_fitting_key(self):
        lock = maze.Lock()

        lock.add_fitting_key("blue")

        self.assertEqual(lock.fitting_keys, ["blue"])

    def test_add_duplicate_fitting_key(self):
        lock = maze.Lock()

        lock.add_fitting_key("blue")
        lock.add_fitting_key("blue")

        self.assertEqual(lock.fitting_keys, ["blue"])

    def test_accepts_fitting_key(self):
        lock = maze.Lock()
        lock.add_fitting_key("blue")

        accepts = lock.accepts("blue")

        self.assertTrue(accepts)

    def test_does_not_accept_missing_key(self):
        lock = maze.Lock()
        lock.add_fitting_key("blue")

        accepts = lock.accepts("red")

        self.assertFalse(accepts)</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">class KeyringTestCase(unittest.TestCase):
    def test_can_unlock_door_no_lock(self):
        keyring = maze.Keyring()
        door = maze.Door(maze.Room(), maze.Room())

        can_unlock = keyring.can_unlock(door)

        self.assertTrue(can_unlock)

    def test_can_unlock_door_having_key(self):
        key = "blue"
        keyring = maze.Keyring()
        lock = maze.Lock()
        keyring.add_key(key)
        lock.add_fitting_key(key)
        door = maze.Door(maze.Room(), maze.Room(), lock)

        can_unlock = keyring.can_unlock(door)

        self.assertTrue(can_unlock)</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">class DoorTestCase(unittest.TestCase):
    def test_tracks_other_side(self):
        room_a = maze.Room("A")
        room_b = maze.Room("B")
        door = maze.Door(room_a, room_b)

        other_size_a = door.other_side(room_a)
        other_size_b = door.other_side(room_b)

        self.assertEqual(other_size_a, room_b)
        self.assertEqual(other_size_b, room_a)</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">class RoomTestCase(unittest.TestCase):
    def test_add_north_door(self):
        room = maze.Room("A")
        north_room = maze.Room("B")

        room.add_north_door(north_room)

        self.assertEqual(room.north_door.other_side(room), north_room)
        self.assertEqual(
            north_room.south_door.other_side(north_room), room)
        self.assertIsNone(north_room.north_door)

    def test_on_enter_adds_key(self):
        room = maze.Room("A", "blue")
        player = maze.Player()

        room.on_enter(player)

        self.assertIn("blue", player.keyring.keys)</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">class PlayerTestCase(unittest.TestCase):
    def test_can_move_through_locked_door_with_key(self):
        key = "blue"
        room_a = maze.Room("A")
        room_b = maze.Room("B")
        lock = maze.Lock()
        lock.add_fitting_key(key)
        room_a.add_north_door(room_b, lock)
        player = maze.Player(room_a)
        player.keyring.add_key(key)

        player.move_through(room_a.north_door)

        self.assertEqual(player.current_room, room_b)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_advanced_topics">Advanced Topics</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">class GameTestCase(unittest.TestCase):
    def setUp(self):
        self.game = maze.basic_maze()

    @unittest.mock.patch("builtins.print")
    def test_print_room(self, mock_print):
        self.game.print_room()

        mock_print.assert_any_call("You are in the entry way.")
        mock_print.assert_any_call("There is a door to the (n)orth.")
        mock_print.assert_any_call("There is a door to the (e)ast.")

    def test_move_player(self):
        kitchen = self.game.end_room
        dining_room = kitchen.south_door.other_side(kitchen)

        self.game.move_player("n")

        self.assertEqual(self.game.player.current_room, dining_room)

    @unittest.mock.patch("builtins.print")
    def test_move_player_no_room(self, mock_print):
        self.game.move_player("s")

        self.assertEqual(
            self.game.player.current_room, self.game.start_room)

    @unittest.mock.patch("builtins.print")
    @unittest.mock.patch("builtins.input")
    def skip_test_play_stuck(self, mock_print, mock_input):
        mock_input.side_effects = ["n", "n", "q"]

        self.game.play()

        mock_print.assert_any_call("You are in the entry way.")
        mock_print.assert_any_call("You are in the library.")
        mock_print.assert_any_call("Cannot move through that door.")

    @unittest.mock.patch("builtins.print")
    @unittest.mock.patch("builtins.input")
    def skip_test_play_win(self, mock_print, mock_input):
        mock_input.side_effects = ["e", "w", "n", "n"]

        self.game.play()

        mock_print.assert_any_call("Picked up blue key")
        mock_print.assert_any_call("You are in the library.")
        mock_print.assert_any_call("You are in the dining room.")
        mock_print.assert_any_call("You won the treasure")</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2020-11-29 17:47:04 UTC
</div>
</div>
</body>
</html>